{"file_contents":{"UzbekRentBox/client/src/components/examples/AdminStats.tsx":{"content":"import AdminStats from \"../AdminStats\";\n\nexport default function AdminStatsExample() {\n  return (\n    <div className=\"bg-background p-4\">\n      <AdminStats\n        stats={{\n          totalGifts: 24,\n          activeRentals: 8,\n          totalUsers: 156,\n          revenue: 1240\n        }}\n      />\n    </div>\n  );\n}\n","size_bytes":316},"UzbekRentBox/client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"UzbekRentBox/client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"UzbekRentBox/client/src/components/examples/FilterBar.tsx":{"content":"import { useState } from \"react\";\nimport FilterBar from \"../FilterBar\";\n\nexport default function FilterBarExample() {\n  const [activeFilter, setActiveFilter] = useState<\"all\" | \"available\" | \"rented\">(\"all\");\n\n  return (\n    <div className=\"bg-background p-8\">\n      <FilterBar activeFilter={activeFilter} onFilterChange={setActiveFilter} />\n    </div>\n  );\n}\n","size_bytes":360},"UzbekRentBox/drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"UzbekRentBox/api/index.ts":{"content":"import type { VercelRequest, VercelResponse } from '@vercel/node';\n\nexport default async function handler(req: VercelRequest, res: VercelResponse) {\n  return res.status(200).json({\n    status: \"API is running\",\n    timestamp: new Date().toISOString(),\n    endpoints: [\n      \"/api/webhook\",\n      \"/api/users/auth\",\n      \"/api/gifts\"\n    ]\n  });\n}","size_bytes":348},"UzbekRentBox/client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"UzbekRentBox/client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"UzbekRentBox/client/src/components/examples/ProfileCard.tsx":{"content":"import ProfileCard from \"../ProfileCard\";\n\nexport default function ProfileCardExample() {\n  return (\n    <div className=\"bg-background p-4\">\n      <ProfileCard\n        telegramId={7263354123}\n        username=\"Foydalanuvchi\"\n        balance={125.5}\n        onConnectWallet={() => console.log(\"Connect wallet clicked\")}\n        isWalletConnected={false}\n      />\n    </div>\n  );\n}\n","size_bytes":380},"UzbekRentBox/client/src/components/ErrorModal.tsx":{"content":"\nimport { AnimationPlayer } from './AnimationPlayer';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\n\ninterface ErrorModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  description: string;\n}\n\nexport function ErrorModal({ isOpen, onClose, title, description }: ErrorModalProps) {\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md glass border-red-500/20\">\n        <DialogHeader>\n          <div className=\"flex justify-center mb-4\">\n            <AnimationPlayer\n              animationPath=\"/error.json\"\n              className=\"w-24 h-24\"\n              loop={false}\n            />\n          </div>\n          <DialogTitle className=\"text-center text-red-400\">{title}</DialogTitle>\n          <DialogDescription className=\"text-center\">\n            {description}\n          </DialogDescription>\n        </DialogHeader>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":1010},"UzbekRentBox/client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"UzbekRentBox/client/src/components/RentalHistoryCard.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar, Coins } from \"lucide-react\";\n\ninterface Rental {\n  id: string;\n  giftName: string;\n  startDate: string;\n  endDate: string;\n  totalCost: number;\n  status: \"active\" | \"completed\";\n}\n\ninterface RentalHistoryCardProps {\n  rentals: Rental[];\n}\n\nexport default function RentalHistoryCard({ rentals }: RentalHistoryCardProps) {\n  return (\n    <Card className=\"glass-strong p-6 border-white/10\">\n      <h3 className=\"text-lg font-semibold mb-4\">Ijara tarixi</h3>\n      \n      <div className=\"space-y-3\">\n        {rentals.map((rental) => (\n          <div \n            key={rental.id}\n            data-testid={`rental-item-${rental.id}`}\n            className=\"glass rounded-lg p-4 hover-elevate\"\n          >\n            <div className=\"flex items-start justify-between mb-2\">\n              <div>\n                <h4 className=\"font-medium\" data-testid={`text-rental-name-${rental.id}`}>\n                  {rental.giftName}\n                </h4>\n                <div className=\"flex items-center space-x-2 mt-1 text-xs text-muted-foreground\">\n                  <Calendar className=\"w-3 h-3\" />\n                  <span>{rental.startDate} - {rental.endDate}</span>\n                </div>\n              </div>\n              <Badge \n                data-testid={`badge-rental-status-${rental.id}`}\n                className={rental.status === \"active\" ? \"bg-emerald-500\" : \"bg-gray-500\"}\n              >\n                {rental.status === \"active\" ? \"Faol\" : \"Tugagan\"}\n              </Badge>\n            </div>\n            \n            <div className=\"flex items-center space-x-1 text-sm\">\n              <Coins className=\"w-4 h-4 text-blue-400\" />\n              <span className=\"gradient-text font-semibold\">{rental.totalCost} TON</span>\n            </div>\n          </div>\n        ))}\n      </div>\n    </Card>\n  );\n}\n","size_bytes":1916},"UzbekRentBox/client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"UzbekRentBox/client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"UzbekRentBox/client/src/components/FilterBar.tsx":{"content":"import { memo } from \"react\";\n\ninterface FilterBarProps {\n  activeFilter: \"all\" | \"available\" | \"sold\";\n  onFilterChange: (filter: \"all\" | \"available\" | \"sold\") => void;\n}\n\nconst FilterBar = memo(function FilterBar({ activeFilter, onFilterChange }: FilterBarProps) {\n  const filters = [\n    { id: \"all\" as const, label: \"Hammasi\" },\n    { id: \"available\" as const, label: \"Mavjud\" },\n    { id: \"sold\" as const, label: \"Sotilgan\" },\n  ];\n\n  return (\n    <div className=\"overflow-x-auto scrollbar-hide\">\n      <div className=\"flex space-x-2 p-2 glass rounded-full w-fit mx-auto min-w-max\">\n        {filters.map((filter) => (\n          <button\n            key={filter.id}\n            data-testid={`button-filter-${filter.id}`}\n            onClick={() => onFilterChange(filter.id)}\n            className={`px-4 sm:px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap touch-manipulation ${\n              activeFilter === filter.id\n                ? \"gradient-blue-purple text-white shadow-lg\"\n                : \"text-muted-foreground hover-elevate\"\n            }`}\n          >\n            {filter.label}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n});\n\nexport default FilterBar;\n","size_bytes":1227},"UzbekRentBox/client/src/components/ItemsLoading.tsx":{"content":"\nimport { AnimationPlayer } from './AnimationPlayer';\n\ninterface ItemsLoadingProps {\n  text?: string;\n}\n\nexport function ItemsLoading({ text = \"Yuklanmoqda...\" }: ItemsLoadingProps) {\n  return (\n    <div className=\"flex flex-col items-center justify-center py-12\">\n      <AnimationPlayer\n        animationPath=\"/loadingiteams.json\"\n        className=\"w-32 h-32\"\n      />\n      <p className=\"mt-4 text-muted-foreground\">{text}</p>\n    </div>\n  );\n}\n","size_bytes":448},"UzbekRentBox/client/src/pages/RentPage.tsx":{"content":"\nimport { useState, useCallback } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport FilterBar from \"@/components/FilterBar\";\nimport GiftCard from \"@/components/GiftCard\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function RentPage() {\n  const [activeFilter, setActiveFilter] = useState<\"all\" | \"available\" | \"sold\">(\"all\");\n  const [buyDialogOpen, setBuyDialogOpen] = useState(false);\n  const [selectedGift, setSelectedGift] = useState<any>(null);\n  const { user, csrfToken } = useAuth();\n  const { toast } = useToast();\n\n  const { data: gifts = [], isLoading } = useQuery({\n    queryKey: [\"/api/gifts\", activeFilter],\n    queryFn: async () => {\n      const params = activeFilter !== \"all\" ? `?filter=${activeFilter}` : \"\";\n      return await fetch(`/api/gifts${params}`).then(res => res.json());\n    },\n  });\n\n  const buyMutation = useMutation({\n    mutationFn: async (data: { giftId: string }) => {\n      if (!csrfToken) {\n        throw new Error(\"CSRF token topilmadi\");\n      }\n\n      if (!data.giftId) {\n        throw new Error(\"Gift ID talab qilinadi\");\n      }\n\n      const response = await fetch(\"/api/purchases\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRF-Token\": csrfToken,\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          giftId: data.giftId,\n        }),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Xaridda xatolik\");\n      }\n\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/gifts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/purchases/me\"] });\n      setBuyDialogOpen(false);\n      toast({\n        title: \"Muvaffaqiyatli!\",\n        description: \"Gift sotib olindi\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Xatolik\",\n        description: error.message || \"Sotib olishda xatolik yuz berdi\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleBuy = useCallback((id: string) => {\n    const gift = gifts.find((g: any) => g._id === id);\n    setSelectedGift(gift);\n    setBuyDialogOpen(true);\n  }, [gifts]);\n\n  const handleConfirmBuy = useCallback(() => {\n    if (!selectedGift) return;\n    buyMutation.mutate({\n      giftId: selectedGift._id,\n    });\n  }, [selectedGift, buyMutation]);\n\n  return (\n    <div className=\"min-h-screen bg-background pb-32\">\n      <div className=\"sticky top-0 z-10 glass-strong backdrop-blur-xl\">\n        <div className=\"p-3 sm:p-4 pt-6 sm:pt-8\">\n          <h1 className=\"text-xl sm:text-2xl font-bold text-center mb-1 gradient-text\">\n            UzPortals\n          </h1>\n          <p className=\"text-center text-xs sm:text-sm text-muted-foreground mb-3 sm:mb-4\">\n            TON orqali Gift sotib olish\n          </p>\n          <FilterBar activeFilter={activeFilter} onFilterChange={setActiveFilter} />\n        </div>\n      </div>\n\n      <div className=\"p-3 sm:p-4\">\n        {isLoading ? (\n          <div className=\"text-center py-16\">\n            <div className=\"inline-block w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : (\n          <>\n            <div className=\"grid grid-cols-2 gap-3 sm:gap-4 md:grid-cols-3 lg:grid-cols-4\">\n              {gifts.map((gift: any) => (\n                <GiftCard\n                  key={gift._id}\n                  id={gift._id}\n                  name={gift.name}\n                  description={gift.description}\n                  lottieUrl={gift.lottieUrl}\n                  price={gift.price}\n                  status={gift.status}\n                  telegramGiftUrl={gift.telegramGiftUrl}\n                  onBuy={handleBuy}\n                />\n              ))}\n            </div>\n\n            {gifts.length === 0 && (\n              <div className=\"text-center py-16\">\n                <p className=\"text-sm sm:text-base text-muted-foreground\">Hech qanday gift topilmadi</p>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      <Dialog open={buyDialogOpen} onOpenChange={setBuyDialogOpen}>\n        <DialogContent className=\"glass-strong border-white/10\">\n          <DialogHeader>\n            <DialogTitle>Gift sotib olish</DialogTitle>\n          </DialogHeader>\n          {selectedGift && (\n            (() => {\n              const insufficientBalance = user ? user.balance < selectedGift.price : false;\n              return (\n                <div className=\"space-y-4 mt-4\">\n                  <div>\n                    <p className=\"text-lg font-semibold\">{selectedGift.name}</p>\n                    {selectedGift.description && (\n                      <p className=\"text-sm text-muted-foreground mt-1\">{selectedGift.description}</p>\n                    )}\n                  </div>\n                  <div className=\"glass rounded-lg p-3\">\n                    <p className=\"text-sm text-muted-foreground\">Narx:</p>\n                    <div className=\"flex items-center gap-2\">\n                      <svg className=\"w-6 h-6\" viewBox=\"0 0 56 56\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56Z\" fill=\"#0098EA\"/>\n                        <path d=\"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5381 22.4861C43.3045 19.4251 41.0761 15.6277 37.5627 15.6277H37.5603ZM26.2548 36.8068L23.6847 31.8327L17.4833 20.7414C17.0742 20.0315 17.5795 19.1218 18.4362 19.1218H26.2524V36.8092L26.2548 36.8068ZM38.5108 20.739L32.3118 31.8351L29.7417 36.8068V19.1194H37.5579C38.4146 19.1194 38.9199 20.0291 38.5108 20.739Z\" fill=\"white\"/>\n                      </svg>\n                      <p className=\"text-2xl font-bold gradient-text\">\n                        {selectedGift.price} TON\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">\n                    <p>Sizning balansigiz: {user?.balance || 0} TON</p>\n                  </div>\n                  <Button\n                    onClick={handleConfirmBuy}\n                    disabled={buyMutation.isPending || insufficientBalance}\n                    className=\"w-full gradient-blue-purple\"\n                  >\n                    {buyMutation.isPending ? \"Kutilmoqda...\" : insufficientBalance ? \"Yetarli balans yo'q\" : \"Sotib olish\"}\n                  </Button>\n                </div>\n              );\n            })()\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":7033},"UzbekRentBox/client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"UzbekRentBox/client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"UzbekRentBox/server/bot.ts":{"content":"import { Telegraf, Markup } from \"telegraf\";\nimport { storage } from \"./storage\";\n\nconst BOT_TOKEN = process.env.TELEGRAM_BOT_TOKEN;\nconst WEBHOOK_DOMAIN = process.env.WEBHOOK_DOMAIN;\nconst USE_WEBHOOK = process.env.USE_WEBHOOK === \"true\";\nconst WEBAPP_URL = process.env.WEBAPP_URL;\n\nif (!BOT_TOKEN) {\n  console.warn(\"‚ö†Ô∏è TELEGRAM_BOT_TOKEN not found. Bot functionality will be disabled.\");\n} else {\n  console.log(\"‚úÖ Telegram bot token found\");\n}\n\nif (!WEBAPP_URL) {\n  console.warn(\"‚ö†Ô∏è WEBAPP_URL not configured. Using fallback URL.\");\n}\n\nexport function createBot() {\n  if (!BOT_TOKEN) {\n    return null;\n  }\n\n  const bot = new Telegraf(BOT_TOKEN);\n\n  bot.command(\"start\", async (ctx) => {\n    const userId = ctx.from.id;\n    const username = ctx.from.username || `user${userId}`;\n    const firstName = ctx.from.first_name || \"\";\n    const lastName = ctx.from.last_name || \"\";\n\n    try {\n      let user = await storage.getUser(userId);\n      \n      if (!user) {\n        user = await storage.createUser({\n          telegramId: userId,\n          username,\n          firstName,\n          lastName,\n        });\n      }\n\n      const webAppUrl = process.env.WEBAPP_URL || \"https://your-app.replit.app\";\n      \n      await ctx.reply(\n        `üëã Xush kelibsiz, ${firstName}!\\n\\n` +\n        `üéÅ AVOV RENT - Telegram giftlarni ijaraga berish va olish platformasi\\n\\n` +\n        `üí∞ Sizning balansigiz: ${user.balance} TON\\n\\n` +\n        `Quyidagi tugmalar orqali platformadan foydalanishingiz mumkin:`,\n        Markup.inlineKeyboard([\n          [Markup.button.webApp(\"üöÄ Ilovani ochish\", webAppUrl)],\n          [Markup.button.callback(\"üí∞ Balans\", \"balance\")],\n          [Markup.button.callback(\"üì¶ Mening ijaralarim\", \"my_rentals\")],\n          [Markup.button.callback(\"‚ùì Yordam\", \"help\")]\n        ])\n      );\n    } catch (error) {\n      console.error(\"Start command error:\", error);\n      await ctx.reply(\"‚ùå Xatolik yuz berdi. Iltimos, qayta urinib ko'ring.\");\n    }\n  });\n\n  bot.command(\"help\", async (ctx) => {\n    await ctx.reply(\n      `üìñ AVOV RENT - Yordam\\n\\n` +\n      `Buyruqlar:\\n` +\n      `/start - Botni ishga tushirish\\n` +\n      `/balance - Balansni ko'rish\\n` +\n      `/rentals - Mening ijaralarim\\n` +\n      `/help - Yordam\\n\\n` +\n      `Platformada siz Telegram giftlarni ijaraga berishingiz va olishingiz mumkin. ` +\n      `Gift ijaraga olish uchun ilovani oching va kerakli giftni tanlang.`\n    );\n  });\n\n  bot.command(\"balance\", async (ctx) => {\n    try {\n      const user = await storage.getUser(ctx.from.id);\n      \n      if (!user) {\n        await ctx.reply(\"‚ùå Foydalanuvchi topilmadi. /start bosing.\");\n        return;\n      }\n\n      const webAppUrl = process.env.WEBAPP_URL || \"https://your-app.replit.app\";\n      \n      await ctx.reply(\n        `üí∞ Sizning balansigiz: ${user.balance} TON\\n\\n` +\n        `${user.walletAddress ? `üîó Ulangan hamyon: ${user.walletAddress.slice(0, 8)}...${user.walletAddress.slice(-6)}` : \"‚ö†Ô∏è Hamyon ulanmagan\"}`,\n        Markup.inlineKeyboard([\n          [Markup.button.webApp(\"üí≥ Deposit qilish\", webAppUrl)]\n        ])\n      );\n    } catch (error) {\n      console.error(\"Balance command error:\", error);\n      await ctx.reply(\"‚ùå Xatolik yuz berdi.\");\n    }\n  });\n\n  bot.command(\"rentals\", async (ctx) => {\n    try {\n      const user = await storage.getUser(ctx.from.id);\n      \n      if (!user) {\n        await ctx.reply(\"‚ùå Foydalanuvchi topilmadi. /start bosing.\");\n        return;\n      }\n\n      const rentals = await storage.getUserRentalsWithGifts((user._id as any).toString(), false);\n      \n      if (rentals.length === 0) {\n        await ctx.reply(\n          `üì¶ Sizda hali ijaralar yo'q.\\n\\n` +\n          `Gift ijaraga olish uchun ilovani oching.`,\n          Markup.inlineKeyboard([\n            [Markup.button.webApp(\"üéÅ Giftlarni ko'rish\", process.env.WEBAPP_URL || \"https://your-app.replit.app\")]\n          ])\n        );\n        return;\n      }\n\n      const activeRentals = rentals.filter(r => r.status === 'active');\n      const completedRentals = rentals.filter(r => r.status === 'completed');\n\n      let message = `üì¶ Sizning ijaralaringiz:\\n\\n`;\n      \n      if (activeRentals.length > 0) {\n        message += `‚úÖ Faol ijaralar (${activeRentals.length}):\\n`;\n        activeRentals.forEach((rental: any, index: number) => {\n          const endDate = new Date(rental.endDate).toLocaleDateString(\"uz-UZ\");\n          message += `${index + 1}. ${rental.gift?.name || 'Unknown'} - ${endDate} gacha\\n`;\n        });\n        message += `\\n`;\n      }\n\n      if (completedRentals.length > 0) {\n        message += `üìã Tugallangan ijaralar: ${completedRentals.length}\\n`;\n      }\n\n      message += `\\nüí∞ Jami sarflangan: ${rentals.reduce((sum: number, r: any) => sum + r.totalCost, 0).toFixed(2)} TON`;\n\n      await ctx.reply(message);\n    } catch (error) {\n      console.error(\"Rentals command error:\", error);\n      await ctx.reply(\"‚ùå Xatolik yuz berdi.\");\n    }\n  });\n\n  bot.action(\"balance\", async (ctx) => {\n    await ctx.answerCbQuery();\n    try {\n      const user = await storage.getUser(ctx.from.id);\n      \n      if (!user) {\n        await ctx.editMessageText(\"‚ùå Foydalanuvchi topilmadi. /start bosing.\");\n        return;\n      }\n\n      const webAppUrl = process.env.WEBAPP_URL || \"https://your-app.replit.app\";\n      \n      await ctx.editMessageText(\n        `üí∞ Sizning balansigiz: ${user.balance} TON\\n\\n` +\n        `${user.walletAddress ? `üîó Ulangan hamyon: ${user.walletAddress.slice(0, 8)}...${user.walletAddress.slice(-6)}` : \"‚ö†Ô∏è Hamyon ulanmagan\"}`,\n        Markup.inlineKeyboard([\n          [Markup.button.webApp(\"üí≥ Deposit qilish\", webAppUrl)],\n          [Markup.button.callback(\"‚óÄÔ∏è Orqaga\", \"back_to_start\")]\n        ])\n      );\n    } catch (error) {\n      console.error(\"Balance action error:\", error);\n      await ctx.answerCbQuery(\"‚ùå Xatolik yuz berdi.\");\n    }\n  });\n\n  bot.action(\"my_rentals\", async (ctx) => {\n    await ctx.answerCbQuery();\n    try {\n      const user = await storage.getUser(ctx.from.id);\n      \n      if (!user) {\n        await ctx.editMessageText(\"‚ùå Foydalanuvchi topilmadi. /start bosing.\");\n        return;\n      }\n\n      const rentals = await storage.getUserRentalsWithGifts((user._id as any).toString(), false);\n      \n      if (rentals.length === 0) {\n        await ctx.editMessageText(\n          `üì¶ Sizda hali ijaralar yo'q.\\n\\n` +\n          `Gift ijaraga olish uchun ilovani oching.`,\n          Markup.inlineKeyboard([\n            [Markup.button.webApp(\"üéÅ Giftlarni ko'rish\", process.env.WEBAPP_URL || \"https://your-app.replit.app\")],\n            [Markup.button.callback(\"‚óÄÔ∏è Orqaga\", \"back_to_start\")]\n          ])\n        );\n        return;\n      }\n\n      const activeRentals = rentals.filter(r => r.status === 'active');\n\n      let message = `üì¶ Sizning ijaralaringiz:\\n\\n`;\n      message += `‚úÖ Faol: ${activeRentals.length}\\n`;\n      message += `üìã Jami: ${rentals.length}\\n`;\n      message += `üí∞ Sarflangan: ${rentals.reduce((sum: number, r: any) => sum + r.totalCost, 0).toFixed(2)} TON`;\n\n      await ctx.editMessageText(\n        message,\n        Markup.inlineKeyboard([\n          [Markup.button.webApp(\"üìã Batafsil ko'rish\", process.env.WEBAPP_URL || \"https://your-app.replit.app\")],\n          [Markup.button.callback(\"‚óÄÔ∏è Orqaga\", \"back_to_start\")]\n        ])\n      );\n    } catch (error) {\n      console.error(\"My rentals action error:\", error);\n      await ctx.answerCbQuery(\"‚ùå Xatolik yuz berdi.\");\n    }\n  });\n\n  bot.action(\"help\", async (ctx) => {\n    await ctx.answerCbQuery();\n    await ctx.editMessageText(\n      `üìñ AVOV RENT - Yordam\\n\\n` +\n      `Bu platforma orqali siz:\\n\\n` +\n      `üéÅ Telegram giftlarni ijaraga olishingiz\\n` +\n      `üí∞ TON orqali to'lov qilishingiz\\n` +\n      `üìä Ijaralaringizni kuzatishingiz mumkin\\n\\n` +\n      `Boshlanish:\\n` +\n      `1. Hamyoningizni ulang\\n` +\n      `2. Balansga TON qo'shing\\n` +\n      `3. Gift tanlang va ijaraga oling\\n\\n` +\n      `Yordam kerak bo'lsa, admin bilan bog'laning.`,\n      Markup.inlineKeyboard([\n        [Markup.button.callback(\"‚óÄÔ∏è Orqaga\", \"back_to_start\")]\n      ])\n    );\n  });\n\n  bot.action(\"back_to_start\", async (ctx) => {\n    await ctx.answerCbQuery();\n    const user = await storage.getUser(ctx.from.id);\n    const webAppUrl = process.env.WEBAPP_URL || \"https://ecb50ce7-3730-4171-8c23-81d6ebf4a19b-00-1t0iack08vtgk.janeway.replit.dev/\";\n    \n    await ctx.editMessageText(\n      `üëã Xush kelibsiz, ${ctx.from.first_name}!\\n\\n` +\n      `üéÅ AVOV RENT - Telegram giftlarni ijaraga berish va olish platformasi\\n\\n` +\n      `üí∞ Sizning balansigiz: ${user?.balance || 0} TON\\n\\n` +\n      `Quyidagi tugmalar orqali platformadan foydalanishingiz mumkin:`,\n      Markup.inlineKeyboard([\n        [Markup.button.webApp(\"üöÄ Ilovani ochish\", webAppUrl)],\n        [Markup.button.callback(\"üí∞ Balans\", \"balance\")],\n        [Markup.button.callback(\"üì¶ Mening ijaralarim\", \"my_rentals\")],\n        [Markup.button.callback(\"‚ùì Yordam\", \"help\")]\n      ])\n    );\n  });\n\n  bot.catch((err, ctx) => {\n    console.error(\"Bot error:\", err);\n    ctx.reply(\"‚ùå Xatolik yuz berdi. Iltimos, qayta urinib ko'ring.\");\n  });\n\n  return bot;\n}\n\nexport async function startBot() {\n  const bot = createBot();\n  \n  if (!bot) {\n    console.log(\"‚ÑπÔ∏è Bot is not configured. Skipping bot initialization.\");\n    return;\n  }\n\n  try {\n    if (USE_WEBHOOK && WEBHOOK_DOMAIN) {\n      console.log(`üåê Starting bot in webhook mode: ${WEBHOOK_DOMAIN}`);\n      await bot.launch({\n        webhook: {\n          domain: WEBHOOK_DOMAIN,\n          port: parseInt(process.env.PORT || '5000', 10),\n        },\n      });\n      console.log(\"‚úÖ Telegram bot started successfully (webhook mode)\");\n    } else {\n      console.log(\"üîÑ Starting bot in polling mode\");\n      await bot.launch({\n        dropPendingUpdates: true,\n      });\n      console.log(\"‚úÖ Telegram bot started successfully (polling mode)\");\n    }\n\n    const botInfo = await bot.telegram.getMe();\n    console.log(`üì± Bot username: @${botInfo.username}`);\n    console.log(`üÜî Bot ID: ${botInfo.id}`);\n\n    const gracefulShutdown = (signal: string) => {\n      console.log(`\\n‚ö†Ô∏è Received ${signal}, shutting down bot gracefully...`);\n      bot.stop(signal);\n    };\n\n    process.once(\"SIGINT\", () => gracefulShutdown(\"SIGINT\"));\n    process.once(\"SIGTERM\", () => gracefulShutdown(\"SIGTERM\"));\n  } catch (error: any) {\n    console.error(\"‚ùå Failed to start bot:\", error.message);\n    \n    if (error.response?.error_code === 409) {\n      console.error(\"‚ö†Ô∏è Conflict error: Another instance of the bot is already running.\");\n      console.error(\"üí° Tip: Stop other instances or wait a few minutes before retrying.\");\n    } else if (error.code === 'ETELEGRAM' && error.response?.error_code === 401) {\n      console.error(\"‚ö†Ô∏è Unauthorized: Invalid bot token.\");\n      console.error(\"üí° Tip: Check your TELEGRAM_BOT_TOKEN environment variable.\");\n    } else {\n      console.error(\"üí° Tip: Check your network connection and bot configuration.\");\n    }\n    \n    throw error;\n  }\n}\n","size_bytes":11127},"UzbekRentBox/client/src/components/BottomNavigation.tsx":{"content":"import { memo } from \"react\";\nimport { Package, User, Settings } from \"lucide-react\";\n\ninterface BottomNavigationProps {\n  activeTab: \"rent\" | \"profile\" | \"admin\";\n  onTabChange: (tab: \"rent\" | \"profile\" | \"admin\") => void;\n  isAdmin?: boolean;\n}\n\nconst BottomNavigation = memo(function BottomNavigation({ activeTab, onTabChange, isAdmin = false }: BottomNavigationProps) {\n  const tabs: Array<{ id: \"rent\" | \"profile\" | \"admin\"; label: string; icon: any }> = [\n    { id: \"rent\", label: \"Ijara\", icon: Package },\n    { id: \"profile\", label: \"Profil\", icon: User },\n  ];\n\n  if (isAdmin) {\n    tabs.push({ id: \"admin\", label: \"Admin\", icon: Settings });\n  }\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 pb-6 px-4 pointer-events-none\" style={{ paddingBottom: \"max(1.5rem, env(safe-area-inset-bottom))\" }}>\n      <div className=\"glass-strong rounded-full shadow-2xl max-w-md mx-auto pointer-events-auto overflow-hidden\">\n        <div className=\"flex items-center justify-around p-2\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            const isActive = activeTab === tab.id;\n\n            return (\n              <button\n                key={tab.id}\n                data-testid={`button-nav-${tab.id}`}\n                onClick={() => onTabChange(tab.id)}\n                className={`flex flex-col items-center justify-center px-6 py-3 rounded-full transition-all duration-300 ${\n                  isActive \n                    ? \"scale-105\" \n                    : \"hover-elevate\"\n                }`}\n              >\n                <Icon className={`w-5 h-5 ${isActive ? \"text-primary\" : \"text-muted-foreground\"}`} />\n                <span className={`text-xs mt-1 font-medium ${isActive ? \"text-primary\" : \"text-muted-foreground\"}`}>\n                  {tab.label}\n                </span>\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport default BottomNavigation;","size_bytes":1960},"UzbekRentBox/client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"UzbekRentBox/client/src/hooks/useAuth.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { getTelegramUser, initTelegram, getTelegramWebApp } from \"@/lib/telegram\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\ninterface User {\n  _id: string;\n  telegramId: number;\n  username: string;\n  firstName?: string;\n  lastName?: string;\n  balance: number;\n  walletAddress?: string;\n  csrfToken?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  isAdmin: boolean;\n  csrfToken: string | null;\n  connectWallet: (address: string) => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [initialized, setInitialized] = useState(false);\n  const telegramUser = getTelegramUser();\n  const ADMIN_ID = 7263354123;\n\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [csrfToken, setCsrfToken] = useState<string | null>(null);\n\n  useEffect(() => {\n    const initTelegram = async () => {\n      try {\n        // Initialize Telegram WebApp\n        if (window.Telegram?.WebApp) {\n          const tg = window.Telegram.WebApp;\n          tg.ready();\n          tg.expand();\n\n          console.log('Telegram WebApp initialized:', tg);\n          console.log('InitDataUnsafe:', tg.initDataUnsafe);\n          console.log('InitData:', tg.initData);\n\n          const telegramUser = tg.initDataUnsafe?.user;\n\n          if (telegramUser) {\n            console.log('Telegram user found:', telegramUser);\n\n            // Authenticate with backend\n            console.log('Sending auth request with data:', {\n              telegramId: telegramUser.id,\n              username: telegramUser.username || `user${telegramUser.id}`,\n              firstName: telegramUser.first_name || '',\n              lastName: telegramUser.last_name || '',\n            });\n\n            const response = await fetch('/api/users/auth', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              body: JSON.stringify({\n                telegramId: telegramUser.id,\n                username: telegramUser.username || `user${telegramUser.id}`,\n                firstName: telegramUser.first_name || '',\n                lastName: telegramUser.last_name || '',\n              }),\n              credentials: 'include',\n            });\n\n            if (response.ok) {\n              const userData = await response.json();\n              console.log('Backend auth response:', userData);\n\n              // Make sure we have all the data\n              const fullUserData = {\n                ...userData,\n                telegramId: userData.telegramId || telegramUser.id,\n                username: userData.username || telegramUser.username || `user${telegramUser.id}`,\n                firstName: userData.firstName || telegramUser.first_name || '',\n                lastName: userData.lastName || telegramUser.last_name || '',\n              };\n\n              console.log('Full user data:', fullUserData);\n              setUser(fullUserData);\n              setCsrfToken(userData.csrfToken || null);\n            }\n          } else {\n            // Development fallback\n            console.warn('No Telegram user data - using mock data for development');\n            const mockUser = {\n              telegramId: 123456789,\n              username: 'testuser',\n              firstName: 'Test',\n              lastName: 'User',\n              balance: 100,\n              walletAddress: null,\n            };\n\n            const response = await fetch('/api/users/auth', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              body: JSON.stringify(mockUser),\n              credentials: 'include',\n            });\n\n            if (response.ok) {\n              const userData = await response.json();\n              setUser({ ...mockUser, ...userData });\n              setCsrfToken(userData.csrfToken || null);\n            }\n          }\n        } else {\n          // Development fallback when Telegram is not available\n          console.warn('Telegram WebApp not available - using mock data');\n          const mockUser = {\n            telegramId: 123456789,\n            username: 'testuser',\n            firstName: 'Test',\n            lastName: 'User',\n            balance: 100,\n            walletAddress: null,\n          };\n\n          const response = await fetch('/api/users/auth', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(mockUser),\n            credentials: 'include',\n          });\n\n          if (response.ok) {\n            const userData = await response.json();\n            setUser({ ...mockUser, ...userData });\n            setCsrfToken(userData.csrfToken || null);\n          }\n        }\n      } catch (error) {\n        console.error('Telegram init error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initTelegram();\n  }, []);\n\n\n  const connectWallet = async (walletAddress: string) => {\n    try {\n      if (!csrfToken) {\n        console.error(\"No CSRF token available\");\n        return;\n      }\n\n      const response = await fetch(\"/api/users/wallet\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRF-Token\": csrfToken,\n        },\n        credentials: \"include\",\n        body: JSON.stringify({ walletAddress }),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Hamyonni ulashda xatolik\");\n      }\n\n      const updatedUser = await response.json();\n      setUser(updatedUser);\n      queryClient.invalidateQueries({ queryKey: [\"/api/users/me\"] });\n    } catch (error) {\n      console.error(\"Wallet connection error:\", error);\n      throw error;\n    }\n  };\n\n  const isAdmin = user?.telegramId === ADMIN_ID;\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: user || null,\n        isLoading: loading,\n        isAdmin,\n        csrfToken,\n        connectWallet: connectWallet,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within AuthProvider\");\n  }\n  return context;\n}","size_bytes":6568},"UzbekRentBox/client/src/components/ProfileCard.tsx":{"content":"import { memo } from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Wallet, TrendingUp, Package, Clock, Plus } from \"lucide-react\";\n\ninterface ProfileCardProps {\n  telegramId: number;\n  username: string;\n  firstName?: string;\n  lastName?: string;\n  balance: number;\n  onConnectWallet?: () => void;\n  onDeposit?: () => void;\n  isWalletConnected?: boolean;\n  tonAddress?: string;\n  activeRentals?: number;\n  totalRentals?: number;\n  totalSpent?: number;\n  walletBalance?: number | { ton: number }; // Added walletBalance to props\n}\n\nconst ProfileCard = memo(function ProfileCard({ \n  telegramId, \n  username,\n  firstName,\n  lastName,\n  balance, \n  onConnectWallet,\n  onDeposit,\n  isWalletConnected = false,\n  tonAddress,\n  activeRentals = 0,\n  totalRentals = 0,\n  totalSpent = 0,\n  walletBalance // Destructure walletBalance\n}: ProfileCardProps) {\n  const displayName = firstName || username;\n  const fullName = [firstName, lastName].filter(Boolean).join(' ') || username;\n\n  // Telegram profile picture URL\n  const profilePhotoUrl = `https://t.me/i/userpic/320/${username}.jpg`;\n\n  return (\n    <Card className=\"glass-strong p-6 border-white/10\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h2 className=\"text-xl font-bold\" data-testid=\"text-username\">{fullName}</h2>\n          <p className=\"text-sm text-muted-foreground\" data-testid=\"text-telegram-id\">@{username} ‚Ä¢ ID: {telegramId}</p>\n        </div>\n        <div className=\"w-16 h-16 rounded-full overflow-hidden shadow-lg border-2 border-white/20\">\n          <img \n            src={profilePhotoUrl}\n            alt={displayName}\n            className=\"w-full h-full object-cover\"\n            onError={(e) => {\n              // Fallback to gradient background with initial\n              e.currentTarget.style.display = 'none';\n              e.currentTarget.parentElement!.classList.add('bg-gradient-to-br', 'from-blue-500', 'to-purple-500', 'flex', 'items-center', 'justify-center');\n              e.currentTarget.parentElement!.innerHTML = `<span class=\"text-2xl font-bold text-white\">${displayName?.charAt(0).toUpperCase() || '?'}</span>`;\n            }}\n          />\n        </div>\n      </div>\n\n      <div className=\"glass rounded-xl p-4 mb-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-sm text-muted-foreground\">TON Balans</span>\n          <Wallet className=\"w-4 h-4 text-blue-400\" />\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <svg className=\"w-8 h-8\" viewBox=\"0 0 56 56\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"28\" cy=\"28\" r=\"28\" fill=\"#0098EA\"/>\n            <path d=\"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5381 22.4861C43.3045 19.4251 41.0761 15.6277 37.5627 15.6277H37.5603ZM26.2548 36.8068L23.6847 31.8327L17.4833 20.7414C17.0742 20.0315 17.5795 19.1218 18.4362 19.1218H26.2524V36.8092L26.2548 36.8068ZM38.5108 20.739L32.3118 31.8351L29.7417 36.8068V19.1194H37.5579C38.4146 19.1194 38.9199 20.0291 38.5108 20.739Z\" fill=\"white\"/>\n          </svg>\n          <span className=\"text-3xl font-bold gradient-text\" data-testid=\"text-balance\">{balance}</span>\n        </div>\n      </div>\n\n      {!isWalletConnected ? (\n        <Button \n          data-testid=\"button-connect-wallet\"\n          onClick={onConnectWallet}\n          className=\"w-full gradient-blue-purple\"\n        >\n          <Wallet className=\"w-4 h-4 mr-2\" />\n          Hamyonni ulash\n        </Button>\n      ) : (\n        <div className=\"space-y-2\">\n          {tonAddress && (\n            <div className=\"glass rounded-lg p-2 text-xs text-center\">\n              <p className=\"text-muted-foreground mb-1\">Ulangan manzil:</p>\n              <p className=\"font-mono break-all\">{tonAddress.slice(0, 8)}...{tonAddress.slice(-6)}</p>\n            </div>\n          )}\n          <div className=\"flex gap-2\">\n            <Button \n              onClick={onDeposit}\n              className=\"flex-1 gradient-blue-purple\"\n            >\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Deposit qilish\n            </Button>\n            <Button \n              onClick={onConnectWallet}\n              variant=\"outline\"\n              className=\"flex-1\"\n            >\n              <Wallet className=\"w-4 h-4 mr-2\" />\n              Hamyonni uzish\n            </Button>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-3 gap-4 mt-6\">\n        <div className=\"text-center glass rounded-lg p-3\">\n          <Package className=\"w-5 h-5 mx-auto mb-1 text-blue-400\" />\n          <p className=\"text-2xl font-bold\" data-testid=\"text-active-rentals\">{activeRentals}</p>\n          <p className=\"text-xs text-muted-foreground\">Faol</p>\n        </div>\n        <div className=\"text-center glass rounded-lg p-3\">\n          <Clock className=\"w-5 h-5 mx-auto mb-1 text-purple-400\" />\n          <p className=\"text-2xl font-bold\" data-testid=\"text-total-rentals\">{totalRentals}</p>\n          <p className=\"text-xs text-muted-foreground\">Jami</p>\n        </div>\n        <div className=\"text-center glass rounded-lg p-3\">\n          <TrendingUp className=\"w-5 h-5 mx-auto mb-1 text-emerald-400\" />\n          <p className=\"text-2xl font-bold\" data-testid=\"text-earnings\">{totalSpent.toFixed(1)}</p>\n          <p className=\"text-xs text-muted-foreground\">TON</p>\n        </div>\n      </div>\n    </Card>\n  );\n});\n\nexport default ProfileCard;","size_bytes":5592},"UzbekRentBox/shared/schema.ts":{"content":"import { z } from \"zod\";\nimport mongoose, { Schema, Document } from \"mongoose\";\n\n// Gift Schema\nexport interface IGift extends Document {\n  name: string;\n  description?: string;\n  lottieUrl: string;\n  price: number;\n  status: \"available\" | \"sold\";\n  soldTo?: string;\n  soldAt?: Date;\n  telegramGiftUrl?: string;\n  createdAt: Date;\n}\n\nconst giftSchema = new Schema<IGift>({\n  name: { type: String, required: true },\n  description: { type: String },\n  lottieUrl: { type: String, required: true },\n  price: { type: Number, required: true },\n  status: { type: String, enum: [\"available\", \"sold\"], default: \"available\" },\n  soldTo: { type: String },\n  soldAt: { type: Date },\n  telegramGiftUrl: { type: String },\n  createdAt: { type: Date, default: Date.now },\n});\n\nexport const Gift = mongoose.model<IGift>(\"Gift\", giftSchema);\n\n// Zod schemas for validation\nexport const insertGiftSchema = z.object({\n  name: z.string().min(1, \"Nom kiritish majburiy\"),\n  description: z.string().optional(),\n  lottieUrl: z.string().url(\"To'g'ri URL kiriting\"),\n  price: z.number().positive(\"Narx musbat bo'lishi kerak\"),\n  telegramGiftUrl: z.union([z.string().url(\"To'g'ri URL kiriting\"), z.literal(\"\")]).optional(),\n});\n\nexport type InsertGift = z.infer<typeof insertGiftSchema>;\n\n// User Schema\nexport interface IUser extends Document {\n  telegramId: number;\n  username: string;\n  firstName?: string;\n  lastName?: string;\n  balance: number;\n  walletAddress?: string;\n  createdAt: Date;\n}\n\nconst userSchema = new Schema<IUser>({\n  telegramId: { type: Number, required: true, unique: true },\n  username: { type: String, required: true },\n  firstName: { type: String },\n  lastName: { type: String },\n  balance: { type: Number, default: 0 },\n  walletAddress: { type: String },\n  createdAt: { type: Date, default: Date.now },\n});\n\nexport const User = mongoose.model<IUser>(\"User\", userSchema);\n\nexport const insertUserSchema = z.object({\n  telegramId: z.number(),\n  username: z.string(),\n  firstName: z.string().optional(),\n  lastName: z.string().optional(),\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\n// Purchase Schema\nexport interface IPurchase extends Document {\n  giftId: string;\n  userId: string;\n  purchaseDate: Date;\n  price: number;\n  status: \"completed\" | \"pending\" | \"cancelled\";\n  transactionHash?: string;\n  createdAt: Date;\n}\n\nconst purchaseSchema = new Schema<IPurchase>({\n  giftId: { type: Schema.Types.ObjectId, ref: 'Gift', required: true },\n  userId: { type: Schema.Types.ObjectId, ref: 'User', required: true },\n  purchaseDate: { type: Date, default: Date.now },\n  price: { type: Number, required: true },\n  status: { type: String, enum: [\"completed\", \"pending\", \"cancelled\"], default: \"completed\" },\n  transactionHash: { type: String },\n  createdAt: { type: Date, default: Date.now },\n});\n\nexport const Purchase = mongoose.model<IPurchase>(\"Purchase\", purchaseSchema);\n\n// Keep old Rental model for backward compatibility during migration\nexport interface IRental extends Document {\n  giftId: string;\n  userId?: string;\n  startDate?: Date;\n  endDate?: Date;\n  days: number;\n  totalCost?: number;\n  status: \"active\" | \"completed\" | \"cancelled\";\n  transactionHash?: string;\n  createdAt: Date;\n}\n\nconst rentalSchema = new Schema<IRental>({\n  giftId: { type: String, required: true },\n  userId: { type: String },\n  startDate: { type: Date },\n  endDate: { type: Date },\n  days: { type: Number, required: true },\n  totalCost: { type: Number },\n  status: { type: String, enum: [\"active\", \"completed\", \"cancelled\"], default: \"active\" },\n  transactionHash: { type: String },\n  createdAt: { type: Date, default: Date.now },\n});\n\nexport const Rental = mongoose.model<IRental>(\"Rental\", rentalSchema);\n\nexport const insertPurchaseSchema = z.object({\n  giftId: z.string().min(1, \"Gift ID talab qilinadi\"),\n  userId: z.string().min(1, \"Foydalanuvchi ID talab qilinadi\"),\n  price: z.number().positive(\"Narx musbat bo'lishi kerak\"),\n  transactionHash: z.string().optional(),\n});\n\nexport type InsertPurchase = z.infer<typeof insertPurchaseSchema>;\n\n// Keep old rental schema for backward compatibility\nexport const insertRentalSchema = z.object({\n  giftId: z.string().min(1, \"Gift ID talab qilinadi\"),\n  userId: z.string().optional(),\n  duration: z.number().min(1, \"Kamida 1 kun talab qilinadi\"),\n  startDate: z.string().or(z.date()).optional(),\n  endDate: z.string().or(z.date()).optional(),\n  totalCost: z.number().optional(),\n  status: z.enum([\"active\", \"completed\", \"cancelled\"]).optional().default(\"active\"),\n});\n\nexport type InsertRental = z.infer<typeof insertRentalSchema>;","size_bytes":4584},"UzbekRentBox/client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"UzbekRentBox/client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"UzbekRentBox/client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport { TonConnectUIProvider } from \"@tonconnect/ui-react\";\nimport App from \"./App\";\nimport \"./index.css\";\n\n// Always use window.location.origin for manifest URL\nconst manifestUrl = window.location.origin + \"/tonconnect-manifest.json\";\n\ncreateRoot(document.getElementById(\"root\")!).render(\n  <TonConnectUIProvider manifestUrl={manifestUrl}>\n    <App />\n  </TonConnectUIProvider>\n);\n","size_bytes":430},"UzbekRentBox/client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"UzbekRentBox/client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"UzbekRentBox/client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"UzbekRentBox/client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"UzbekRentBox/client/src/components/AdminStats.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Package, Users, TrendingUp, Clock } from \"lucide-react\";\n\ninterface StatsData {\n  totalGifts: number;\n  activeRentals: number;\n  totalUsers: number;\n  revenue: number;\n}\n\ninterface AdminStatsProps {\n  stats: StatsData;\n}\n\nexport default function AdminStats({ stats }: AdminStatsProps) {\n  console.log('AdminStats received:', stats);\n  \n  const statCards = [\n    { label: \"Jami Giftlar\", value: stats.totalGifts, icon: Package, color: \"text-blue-400\" },\n    { label: \"Faol Ijaralar\", value: stats.activeRentals, icon: Clock, color: \"text-purple-400\" },\n    { label: \"Foydalanuvchilar\", value: stats.totalUsers, icon: Users, color: \"text-emerald-400\" },\n    { label: \"Daromad (TON)\", value: stats.revenue, icon: TrendingUp, color: \"text-amber-400\" },\n  ];\n\n  return (\n    <div className=\"grid grid-cols-2 gap-4\">\n      {statCards.map((stat, index) => {\n        const Icon = stat.icon;\n        return (\n          <Card \n            key={index}\n            data-testid={`card-stat-${index}`}\n            className=\"glass-strong p-4 border-white/10\"\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <Icon className={`w-5 h-5 ${stat.color}`} />\n            </div>\n            <p className=\"text-2xl font-bold gradient-text\" data-testid={`text-stat-value-${index}`}>\n              {stat.value}\n            </p>\n            <p className=\"text-xs text-muted-foreground mt-1\">{stat.label}</p>\n          </Card>\n        );\n      })}\n    </div>\n  );\n}\n","size_bytes":1540},"UzbekRentBox/api/webhook.ts":{"content":"\nimport type { VercelRequest, VercelResponse } from '@vercel/node';\nimport { Telegraf } from \"telegraf\";\nimport { connectDB } from \"../server/db\";\nimport { storage } from \"../server/storage\";\n\nconst BOT_TOKEN = process.env.TELEGRAM_BOT_TOKEN;\n\nif (!BOT_TOKEN) {\n  console.error(\"‚ùå TELEGRAM_BOT_TOKEN is not set\");\n}\n\nexport default async function handler(req: VercelRequest, res: VercelResponse) {\n  try {\n    // Handle GET requests (for webhook verification)\n    if (req.method === \"GET\") {\n      return res.status(200).json({ \n        status: \"Webhook is active\", \n        timestamp: new Date().toISOString() \n      });\n    }\n\n    // Only handle POST requests for updates\n    if (req.method !== \"POST\") {\n      return res.status(405).json({ error: \"Method not allowed\" });\n    }\n\n    if (!BOT_TOKEN) {\n      return res.status(500).json({ error: \"Bot token not configured\" });\n    }\n\n    // Connect to database\n    await connectDB();\n\n    // Create bot instance\n    const bot = new Telegraf(BOT_TOKEN);\n\n    // Register bot commands\n    bot.command(\"start\", async (ctx) => {\n      const userId = ctx.from.id;\n      const username = ctx.from.username || `user${userId}`;\n      const firstName = ctx.from.first_name || \"\";\n      const lastName = ctx.from.last_name || \"\";\n\n      try {\n        let user = await storage.getUser(userId);\n        \n        if (!user) {\n          user = await storage.createUser({\n            telegramId: userId,\n            username,\n            firstName,\n            lastName,\n          });\n        }\n\n        const webAppUrl = process.env.WEBAPP_URL || \"https://avov.vercel.app\";\n        \n        await ctx.reply(\n          `üëã Xush kelibsiz, ${firstName}!\\n\\n` +\n          `üéÅ AVOV RENT - Telegram giftlarni ijaraga berish platformasi\\n\\n` +\n          `üí∞ Balans: ${user.balance} TON\\n\\n` +\n          `Boshlash uchun quyidagi tugmani bosing:`,\n          {\n            reply_markup: {\n              inline_keyboard: [\n                [{ text: \"üöÄ Ilovani ochish\", web_app: { url: webAppUrl } }]\n              ]\n            }\n          }\n        );\n      } catch (error) {\n        console.error(\"Start command error:\", error);\n        await ctx.reply(\"‚ùå Xatolik yuz berdi. /start ni qayta bosing.\");\n      }\n    });\n\n    bot.command(\"balance\", async (ctx) => {\n      try {\n        const user = await storage.getUser(ctx.from.id);\n        if (!user) {\n          await ctx.reply(\"‚ùå Foydalanuvchi topilmadi. /start bosing.\");\n          return;\n        }\n        await ctx.reply(`üí∞ Balans: ${user.balance} TON`);\n      } catch (error) {\n        console.error(\"Balance command error:\", error);\n        await ctx.reply(\"‚ùå Xatolik yuz berdi.\");\n      }\n    });\n\n    // Handle the update\n    await bot.handleUpdate(req.body);\n    \n    return res.status(200).json({ ok: true });\n  } catch (error: any) {\n    console.error(\"Webhook error:\", error);\n    return res.status(200).json({ ok: true }); // Always return 200 to Telegram\n  }\n}\n","size_bytes":2974},"UzbekRentBox/client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"UzbekRentBox/client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"UzbekRentBox/client/src/components/examples/GiftCard.tsx":{"content":"import GiftCard from \"../GiftCard\";\n\nexport default function GiftCardExample() {\n  return (\n    <div className=\"bg-background p-4 max-w-xs\">\n      <GiftCard\n        id=\"1\"\n        name=\"Plush Pepe #604\"\n        lottieUrl=\"https://via.placeholder.com/300\"\n        pricePerDay={5}\n        status=\"available\"\n        onRent={(id) => console.log(`Renting gift ${id}`)}\n      />\n    </div>\n  );\n}\n","size_bytes":392},"UzbekRentBox/client/src/pages/examples/AdminPage.tsx":{"content":"import AdminPage from \"../AdminPage\";\n\nexport default function AdminPageExample() {\n  return <AdminPage />;\n}\n","size_bytes":110},"UzbekRentBox/client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"UzbekRentBox/client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"UzbekRentBox/vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"UzbekRentBox/client/src/components/LoadingScreen.tsx":{"content":"\nimport { useEffect, useState } from \"react\";\n\ninterface LoadingScreenProps {\n  onComplete: () => void;\n}\n\nexport default function LoadingScreen({ onComplete }: LoadingScreenProps) {\n  const [isComplete, setIsComplete] = useState(false);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setIsComplete(true);\n      setTimeout(onComplete, 300);\n    }, 3000);\n\n    return () => clearTimeout(timer);\n  }, [onComplete]);\n\n  return (\n    <div className={`fixed inset-0 z-50 flex items-center justify-center bg-[#2d2d2d] transition-opacity duration-300 ${isComplete ? 'opacity-0' : 'opacity-100'}`}>\n      <div className=\"flex flex-col items-center space-y-8\">\n        <div className=\"w-64 h-64 flex items-center justify-center\">\n          <img \n            src=\"/loadingscreen.gif\" \n            alt=\"Loading...\" \n            className=\"w-full h-full object-contain\"\n          />\n        </div>\n        <h1 className=\"text-4xl sm:text-5xl md:text-6xl font-bold tracking-wider gradient-text animate-fade-in\">\n          UzPortals\n        </h1>\n      </div>\n    </div>\n  );\n}\n","size_bytes":1081},"UzbekRentBox/client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"UzbekRentBox/client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"UzbekRentBox/api/gifts.ts":{"content":"\nimport type { VercelRequest, VercelResponse } from '@vercel/node';\nimport { connectDB } from \"../server/db\";\nimport { storage } from \"../server/storage\";\n\nexport default async function handler(req: VercelRequest, res: VercelResponse) {\n  if (req.method !== 'GET') {\n    return res.status(405).json({ message: \"Method not allowed\" });\n  }\n\n  try {\n    await connectDB();\n\n    const filter = req.query.filter as \"all\" | \"available\" | \"rented\" | undefined;\n    const gifts = await storage.getGifts(filter);\n    return res.json(gifts);\n  } catch (error: any) {\n    console.error(\"Gifts error:\", error);\n    return res.status(500).json({ message: error.message });\n  }\n}\n","size_bytes":667},"UzbekRentBox/client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"UzbekRentBox/client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"UzbekRentBox/client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"UzbekRentBox/client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"UzbekRentBox/client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"UzbekRentBox/client/src/components/examples/BottomNavigation.tsx":{"content":"import { useState } from \"react\";\nimport BottomNavigation from \"../BottomNavigation\";\n\nexport default function BottomNavigationExample() {\n  const [activeTab, setActiveTab] = useState<\"rent\" | \"profile\" | \"admin\">(\"rent\");\n\n  return (\n    <div className=\"h-screen bg-background\">\n      <BottomNavigation \n        activeTab={activeTab} \n        onTabChange={setActiveTab}\n        isAdmin={true}\n      />\n    </div>\n  );\n}\n","size_bytes":421},"UzbekRentBox/client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"UzbekRentBox/client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"UzbekRentBox/client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"UzbekRentBox/client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"UzbekRentBox/server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"UzbekRentBox/client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"UzbekRentBox/client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"UzbekRentBox/client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"UzbekRentBox/server/storage.ts":{"content":"import {\n  Gift, User, Rental, Purchase,\n  type IGift, type IUser, type IRental, type IPurchase,\n  type InsertGift, type InsertUser, type InsertRental, type InsertPurchase\n} from \"@shared/schema\";\nimport { ObjectId } from \"mongodb\"; // Assuming ObjectId is needed for admin operations\n\n// Simple in-memory storage for maintenance mode\nlet maintenanceMode = false;\n\nexport interface IStorage {\n  // User operations\n  getUser(telegramId: number): Promise<IUser | null>;\n  createUser(user: InsertUser): Promise<IUser>;\n  updateUserBalance(telegramId: number, amount: number): Promise<IUser | null>;\n  connectWallet(telegramId: number, walletAddress: string): Promise<IUser | null>;\n  processDeposit(telegramId: number, amount: number, transactionBoc: string): Promise<IUser | null>;\n  getUserById(userId: string): Promise<IUser | null>; // Added based on changes\n\n  // Gift operations\n  getGifts(filter?: \"all\" | \"available\" | \"sold\"): Promise<IGift[]>;\n  getGift(id: string): Promise<IGift | null>;\n  createGift(gift: InsertGift): Promise<IGift>;\n  updateGift(id: string, gift: Partial<InsertGift>): Promise<IGift | null>;\n  deleteGift(id: string): Promise<boolean>;\n\n  // Purchase operations\n  createPurchase(purchaseData: {\n    userId: string;\n    giftId: string;\n    price: number;\n    transactionHash?: string;\n  }): Promise<IPurchase>;\n  getUserPurchases(userId: string): Promise<IPurchase[]>;\n  getUserPurchasesWithGifts(userId: string): Promise<any[]>;\n  getAllPurchases(): Promise<IPurchase[]>;\n\n  // Rental operations\n  createRental(rentalData: {\n    userId: string;\n    giftId: string;\n    duration: number;\n    startDate: Date;\n    endDate: Date;\n    totalCost: number;\n    status: 'active' | 'completed' | 'cancelled';\n  }): Promise<IRental>; // Updated based on changes\n  getUserRentals(userId: string, activeOnly?: boolean): Promise<IRental[]>;\n  getUserRentalsWithGifts(userId: string, activeOnly?: boolean): Promise<any[]>; // Updated based on changes\n  getAllRentals(): Promise<IRental[]>; // This method is used by both regular users and admin.\n  completeRental(rentalId: string): Promise<IRental | null>; // Updated based on changes\n\n  // Stats\n  getStats(): Promise<{ // Updated based on changes\n    totalGifts: number;\n    activeRentals: number;\n    totalUsers: number;\n    revenue: number;\n  }>;\n  getUsersWithStats(): Promise<any[]>; // Added based on changes\n\n  // Admin operations (newly added based on changes)\n  getAllUsers(): Promise<any[]>; // Updated based on changes\n  updateUserBalanceAdmin(userId: string, amount: number): Promise<IUser | null>;\n  cancelRental(rentalId: string): Promise<IRental | null>;\n\n  // Maintenance mode operations\n  getMaintenanceMode(): Promise<boolean>;\n  setMaintenanceMode(enabled: boolean): Promise<boolean>;\n}\n\nexport class MongoStorage implements IStorage {\n  // User operations\n  async getUser(telegramId: number): Promise<IUser | null> {\n    return await User.findOne({ telegramId });\n  }\n\n  async createUser(userData: InsertUser): Promise<IUser> {\n    const user = new User(userData);\n    return await user.save();\n  }\n\n  async updateUserBalance(telegramId: number, amount: number): Promise<IUser | null> {\n    return await User.findOneAndUpdate(\n      { telegramId },\n      { $inc: { balance: amount } },\n      { new: true }\n    );\n  }\n\n  async connectWallet(telegramId: number, walletAddress: string): Promise<IUser | null> {\n    return await User.findOneAndUpdate(\n      { telegramId },\n      { walletAddress },\n      { new: true }\n    );\n  }\n\n  async processDeposit(telegramId: number, amount: number, transactionBoc: string): Promise<IUser | null> {\n    console.log(`Processing deposit for user ${telegramId}: ${amount} TON`);\n    console.log(`Transaction BOC: ${transactionBoc.substring(0, 50)}...`);\n\n    return await User.findOneAndUpdate(\n      { telegramId },\n      { $inc: { balance: amount } },\n      { new: true }\n    );\n  }\n\n  // Added based on changes\n  async getUserById(userId: string): Promise<IUser | null> {\n    return await User.findById(userId).lean() as IUser | null;\n  }\n\n  // Gift operations\n  async getGifts(filter?: \"all\" | \"available\" | \"sold\"): Promise<IGift[]> {\n    if (filter === \"available\") {\n      return await Gift.find({ status: \"available\" });\n    } else if (filter === \"sold\") {\n      return await Gift.find({ status: \"sold\" });\n    }\n    return await Gift.find();\n  }\n\n  async getGift(id: string): Promise<IGift | null> {\n    return await Gift.findById(id);\n  }\n\n  async createGift(giftData: InsertGift): Promise<IGift> {\n    const gift = new Gift(giftData);\n    return await gift.save();\n  }\n\n  async updateGift(id: string, giftData: Partial<InsertGift>): Promise<IGift | null> {\n    return await Gift.findByIdAndUpdate(id, giftData, { new: true });\n  }\n\n  async deleteGift(id: string): Promise<boolean> {\n    const result = await Gift.findByIdAndDelete(id);\n    return result !== null;\n  }\n\n  // Purchase operations\n  async createPurchase(purchaseData: {\n    userId: string;\n    giftId: string;\n    price: number;\n    transactionHash?: string;\n  }): Promise<IPurchase> {\n    const gift = await Gift.findById(purchaseData.giftId);\n    if (!gift) throw new Error(\"Gift topilmadi\");\n    if (gift.status === \"sold\") throw new Error(\"Gift allaqachon sotilgan\");\n\n    const user = await User.findById(purchaseData.userId);\n    if (!user) throw new Error(\"Foydalanuvchi topilmadi\");\n\n    const price = gift.price;\n\n    if (user.balance < price) {\n      throw new Error(`Yetarli balans yo'q. Kerak: ${price} TON, Mavjud: ${user.balance} TON`);\n    }\n\n    const purchase = new Purchase({\n      userId: purchaseData.userId,\n      giftId: purchaseData.giftId,\n      price: price,\n      purchaseDate: new Date(),\n      status: 'completed',\n      transactionHash: purchaseData.transactionHash,\n    });\n\n    const savedPurchase = await purchase.save();\n\n    await Gift.findByIdAndUpdate(purchaseData.giftId, {\n      status: \"sold\",\n      soldTo: purchaseData.userId,\n      soldAt: new Date(),\n    });\n\n    await User.findByIdAndUpdate(purchaseData.userId, {\n      $inc: { balance: -price }\n    });\n\n    return savedPurchase;\n  }\n\n  async getUserPurchases(userId: string): Promise<IPurchase[]> {\n    return await Purchase.find({ userId }).sort({ createdAt: -1 });\n  }\n\n  async getUserPurchasesWithGifts(userId: string): Promise<any[]> {\n    const purchases = await Purchase.find({ userId })\n      .populate('gift')\n      .sort({ createdAt: -1 })\n      .lean();\n\n    return purchases as any[];\n  }\n\n  async getAllPurchases(): Promise<IPurchase[]> {\n    const purchases = await Purchase.find({})\n      .populate('gift')\n      .sort({ createdAt: -1 });\n\n    return purchases;\n  }\n\n  // Rental operations\n  async createRental(rentalData: {\n    userId: string;\n    giftId: string;\n    duration: number;\n    startDate: Date;\n    endDate: Date;\n    totalCost: number;\n    status: 'active' | 'completed' | 'cancelled';\n  }): Promise<IRental> {\n    const gift = await Gift.findById(rentalData.giftId);\n    if (!gift) throw new Error(\"Gift topilmadi\");\n    if (gift.status === \"sold\") throw new Error(\"Gift allaqachon sotilgan\");\n\n    if (!rentalData.userId) throw new Error(\"Foydalanuvchi ID talab qilinadi\");\n\n    const user = await User.findById(rentalData.userId);\n    if (!user) throw new Error(\"Foydalanuvchi topilmadi\");\n\n    const startDate = new Date();\n    const endDate = new Date();\n    endDate.setDate(endDate.getDate() + rentalData.duration);\n\n    const totalCost = gift.price * rentalData.duration;\n\n    if (user.balance < totalCost) {\n      throw new Error(`Yetarli balans yo'q. Kerak: ${totalCost} TON, Mavjud: ${user.balance} TON`);\n    }\n\n    const rental = new Rental({\n      userId: rentalData.userId,\n      giftId: rentalData.giftId,\n      duration: rentalData.duration,\n      startDate: startDate,\n      endDate: endDate,\n      totalCost: totalCost,\n      status: rentalData.status || 'active', // Default to active if not provided\n    });\n\n    const savedRental = await rental.save();\n\n    await Gift.findByIdAndUpdate(rentalData.giftId, {\n      status: \"sold\",\n      soldTo: rentalData.userId,\n      soldAt: endDate,\n    });\n\n    await User.findByIdAndUpdate(rentalData.userId, {\n      $inc: { balance: -totalCost }\n    });\n\n    return savedRental;\n  }\n\n  async getUserRentals(userId: string, activeOnly = false): Promise<IRental[]> {\n    const filter: any = { userId };\n    if (activeOnly) {\n      filter.status = \"active\";\n    }\n    return await Rental.find(filter).sort({ createdAt: -1 });\n  }\n\n  async getUserRentalsWithGifts(userId: string, activeOnly = false): Promise<any[]> {\n    const filter: any = { userId };\n    if (activeOnly) {\n      filter.status = \"active\";\n    }\n    const rentals = await Rental.find(filter)\n      .populate('gift')\n      .sort({ createdAt: -1 })\n      .lean();\n\n    return rentals as any[];\n  }\n\n  async getAllRentals(): Promise<IRental[]> {\n    const rentals = await Rental.find({})\n      .populate('gift')\n      .sort({ createdAt: -1 });\n\n    return rentals;\n  }\n\n  async completeRental(rentalId: string): Promise<IRental | null> {\n    const rental = await Rental.findByIdAndUpdate(\n      rentalId,\n      { status: \"completed\" },\n      { new: true }\n    ).lean() as IRental | null;\n\n    if (rental) {\n      await Gift.findByIdAndUpdate(rental.giftId, {\n        status: \"available\",\n        $unset: { soldTo: \"\", soldAt: \"\" },\n      });\n    }\n\n    return rental;\n  }\n\n  // Stats\n  async getStats(): Promise<{\n    totalGifts: number;\n    activeRentals: number;\n    totalUsers: number;\n    revenue: number;\n  }> {\n    const totalGifts = await Gift.countDocuments();\n    const activeRentals = await Rental.countDocuments({ status: \"active\" });\n    const totalUsers = await User.countDocuments();\n    const rentals = await Rental.find({ status: { $in: [\"active\", \"completed\"] } });\n    const revenue = rentals.reduce((sum, rental) => sum + (rental.totalCost || 0), 0);\n\n    return {\n      totalGifts,\n      activeRentals,\n      totalUsers,\n      revenue,\n    };\n  }\n\n  // Admin operations\n  async getAllUsers(): Promise<any[]> {\n    const users = await User.find({}).lean();\n\n    const usersWithStats = await Promise.all(users.map(async (user) => {\n      const rentals = await Rental.find({ userId: user._id }).lean();\n      const rentalCount = rentals.length;\n      const totalSpent = rentals.reduce((sum: number, r: any) => sum + (r.totalCost || 0), 0);\n\n      return {\n        ...user,\n        rentalCount,\n        totalSpent\n      };\n    }));\n\n    return usersWithStats;\n  }\n\n  async getUsersWithStats(): Promise<any[]> {\n    const users = await User.aggregate([\n      {\n        $lookup: {\n          from: 'rentals',\n          localField: '_id',\n          foreignField: 'userId',\n          as: 'rentals'\n        }\n      },\n      {\n        $addFields: {\n          rentalCount: { $size: '$rentals' },\n          totalSpent: {\n            $sum: '$rentals.totalCost'\n          }\n        }\n      },\n      {\n        $project: {\n          rentals: 0\n        }\n      }\n    ]);\n\n    return users as any[];\n  }\n\n  async updateUserBalanceAdmin(userId: string, amount: number): Promise<IUser | null> {\n    const result = await User.findByIdAndUpdate(\n      userId,\n      { $inc: { balance: amount } },\n      { new: true }\n    );\n\n    if (!result) {\n      throw new Error(\"Foydalanuvchi topilmadi\");\n    }\n\n    return result;\n  }\n\n  async cancelRental(rentalId: string): Promise<IRental | null> {\n    const rental = await Rental.findById(rentalId);\n\n    if (!rental) {\n      throw new Error(\"Ijara topilmadi\");\n    }\n\n    if (rental.status !== 'active') {\n      throw new Error(\"Faqat faol ijaralarni bekor qilish mumkin\");\n    }\n\n    rental.status = 'cancelled';\n    await rental.save();\n\n    await Gift.findByIdAndUpdate(rental.giftId, {\n      status: 'available',\n      $unset: { soldTo: \"\", soldAt: \"\" }\n    });\n\n    const now = new Date();\n    const rentalDoc = rental as any;\n    const endDate = new Date(rentalDoc.endDate || now);\n    const totalCost = rentalDoc.totalCost || 0;\n    const duration = rentalDoc.duration ?? 1;\n    const remainingDays = Math.max(0, Math.ceil((endDate.getTime() - now.getTime()) / (1000 * 60 * 60 * 24)));\n    const refundAmount = (totalCost / duration) * remainingDays;\n\n    if (refundAmount > 0) {\n      await User.findByIdAndUpdate(rental.userId, {\n        $inc: { balance: refundAmount }\n      });\n    }\n\n    return rental;\n  }\n\n  // Maintenance mode operations\n  async getMaintenanceMode(): Promise<boolean> {\n    return maintenanceMode;\n  }\n\n  async setMaintenanceMode(enabled: boolean): Promise<boolean> {\n    maintenanceMode = enabled;\n    return maintenanceMode;\n  }\n}\n\nexport const storage = new MongoStorage();","size_bytes":12688},"UzbekRentBox/client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"UzbekRentBox/client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"UzbekRentBox/client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"UzbekRentBox/client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 17.6%;\n  --foreground: 0 0% 98%;\n  --border: 0 0% 25%;\n  --card: 0 0% 20%;\n  --card-foreground: 0 0% 98%;\n  --card-border: 0 0% 23%;\n  --sidebar: 0 0% 19%;\n  --sidebar-foreground: 0 0% 98%;\n  --sidebar-border: 0 0% 22%;\n  --sidebar-primary: 217 91% 60%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 240 8% 23%;\n  --sidebar-accent-foreground: 0 0% 98%;\n  --sidebar-ring: 217 91% 60%;\n  --popover: 0 0% 20%;\n  --popover-foreground: 0 0% 98%;\n  --popover-border: 0 0% 25%;\n  --primary: 217 91% 60%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 240 6% 25%;\n  --secondary-foreground: 0 0% 98%;\n  --muted: 240 5% 22%;\n  --muted-foreground: 0 0% 70%;\n  --accent: 240 8% 22%;\n  --accent-foreground: 0 0% 98%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 28%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 60%;\n  --chart-2: 262 83% 58%;\n  --chart-3: 142 76% 36%;\n  --chart-4: 38 92% 50%;\n  --chart-5: 340 82% 52%;\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 1px 2px 0px rgba(0, 0, 0, 0.3);\n  --shadow-xs: 0px 1px 3px 0px rgba(0, 0, 0, 0.4);\n  --shadow-sm: 0px 2px 4px 0px rgba(0, 0, 0, 0.4);\n  --shadow: 0px 4px 6px -1px rgba(0, 0, 0, 0.4);\n  --shadow-md: 0px 6px 12px -2px rgba(0, 0, 0, 0.5);\n  --shadow-lg: 0px 10px 20px -4px rgba(0, 0, 0, 0.5);\n  --shadow-xl: 0px 20px 30px -6px rgba(0, 0, 0, 0.6);\n  --shadow-2xl: 0px 30px 50px -12px rgba(0, 0, 0, 0.7);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 0 0% 17.6%;\n  --foreground: 0 0% 98%;\n  --border: 0 0% 25%;\n  --card: 0 0% 20%;\n  --card-foreground: 0 0% 98%;\n  --card-border: 0 0% 23%;\n  --sidebar: 0 0% 19%;\n  --sidebar-foreground: 0 0% 98%;\n  --sidebar-border: 0 0% 22%;\n  --sidebar-primary: 217 91% 60%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 240 8% 23%;\n  --sidebar-accent-foreground: 0 0% 98%;\n  --sidebar-ring: 217 91% 60%;\n  --popover: 0 0% 20%;\n  --popover-foreground: 0 0% 98%;\n  --popover-border: 0 0% 25%;\n  --primary: 217 91% 60%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 240 6% 25%;\n  --secondary-foreground: 0 0% 98%;\n  --muted: 240 5% 22%;\n  --muted-foreground: 0 0% 70%;\n  --accent: 240 8% 22%;\n  --accent-foreground: 0 0% 98%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 28%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 60%;\n  --chart-2: 262 83% 58%;\n  --chart-3: 142 76% 36%;\n  --chart-4: 38 92% 50%;\n  --chart-5: 340 82% 52%;\n  --shadow-2xs: 0px 1px 2px 0px rgba(0, 0, 0, 0.3);\n  --shadow-xs: 0px 1px 3px 0px rgba(0, 0, 0, 0.4);\n  --shadow-sm: 0px 2px 4px 0px rgba(0, 0, 0, 0.4);\n  --shadow: 0px 4px 6px -1px rgba(0, 0, 0, 0.4);\n  --shadow-md: 0px 6px 12px -2px rgba(0, 0, 0, 0.5);\n  --shadow-lg: 0px 10px 20px -4px rgba(0, 0, 0, 0.5);\n  --shadow-xl: 0px 20px 30px -6px rgba(0, 0, 0, 0.6);\n  --shadow-2xl: 0px 30px 50px -12px rgba(0, 0, 0, 0.7);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    /* Mobile fullscreen safe area support */\n    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);\n    min-height: 100vh;\n    min-height: -webkit-fill-available;\n  }\n\n  html {\n    height: -webkit-fill-available;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n  /* Glassmorphism utilities */\n  .glass {\n    background: rgba(255, 255, 255, 0.1);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.18);\n  }\n\n  .glass-strong {\n    background: rgba(255, 255, 255, 0.15);\n    backdrop-filter: blur(16px);\n    -webkit-backdrop-filter: blur(16px);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n  }\n\n  .gradient-blue-purple {\n    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);\n  }\n\n  .gradient-text {\n    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n  }\n\n  @keyframes fade-in {\n    from {\n      opacity: 0;\n      transform: scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n\n  .animate-fade-in {\n    animation: fade-in 0.5s ease-out;\n  }\n\n  /* Hide scrollbar for filter bar */\n  .scrollbar-hide::-webkit-scrollbar {\n    display: none;\n  }\n\n  .scrollbar-hide {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n\n  /* Improve touch targets on mobile */\n  .touch-manipulation {\n    touch-action: manipulation;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","size_bytes":11696},"UzbekRentBox/client/src/components/examples/LoadingScreen.tsx":{"content":"import LoadingScreen from \"../LoadingScreen\";\n\nexport default function LoadingScreenExample() {\n  return (\n    <LoadingScreen onComplete={() => console.log(\"Loading complete\")} />\n  );\n}\n","size_bytes":187},"UzbekRentBox/client/src/pages/AdminPage.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport AdminStats from \"@/components/AdminStats\";\nimport { Plus, Edit, Trash2, DollarSign, Users, Gift, ShoppingCart, Ban, RefreshCw } from \"lucide-react\";\n\nexport default function AdminPage() {\n  const { user, csrfToken } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [giftDialogOpen, setGiftDialogOpen] = useState(false);\n  const [editingGift, setEditingGift] = useState<any>(null);\n  const [userDialogOpen, setUserDialogOpen] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<any>(null);\n\n  // Fetch maintenance mode status\n  const { data: maintenanceData } = useQuery({\n    queryKey: [\"/api/maintenance\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/maintenance\", { credentials: \"include\" });\n      return res.json();\n    },\n  });\n\n  // Form states\n  const [giftForm, setGiftForm] = useState({\n    name: \"\",\n    lottieUrl: \"\",\n    price: \"\",\n    telegramGiftUrl: \"\",\n    description: \"\",\n    available: true,\n  });\n\n  // Fetch stats\n  const { data: stats } = useQuery({\n    queryKey: [\"/api/stats\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/stats\", { credentials: \"include\" });\n      return res.json();\n    },\n  });\n\n  // Fetch gifts\n  const { data: gifts = [] } = useQuery({\n    queryKey: [\"/api/gifts\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/gifts\", { credentials: \"include\" });\n      return res.json();\n    },\n  });\n\n  // Fetch users\n  const { data: users = [] } = useQuery({\n    queryKey: [\"/api/admin/users\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/users\", { credentials: \"include\" });\n      return res.json();\n    },\n  });\n\n  // Fetch all rentals\n  const { data: allRentals = [] } = useQuery({\n    queryKey: [\"/api/admin/rentals\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/admin/rentals\", { credentials: \"include\" });\n      return res.json();\n    },\n  });\n\n  // Fetch all purchases\n  const { data: allPurchases = [] } = useQuery({\n    queryKey: [\"/api/purchases\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/purchases\", { credentials: \"include\" });\n      return res.json();\n    },\n  });\n\n  // Create/Update gift mutation\n  const giftMutation = useMutation({\n    mutationFn: async (data: any) => {\n      if (!csrfToken) throw new Error(\"CSRF token topilmadi\");\n      const url = editingGift ? `/api/gifts/${editingGift._id}` : \"/api/gifts\";\n      const method = editingGift ? \"PUT\" : \"POST\";\n      const res = await fetch(url, {\n        method,\n        headers: { \n          \"Content-Type\": \"application/json\",\n          \"X-CSRF-Token\": csrfToken\n        },\n        credentials: \"include\",\n        body: JSON.stringify(data),\n      });\n      if (!res.ok) throw new Error(await res.text());\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/gifts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats\"] });\n      setGiftDialogOpen(false);\n      setEditingGift(null);\n      setGiftForm({ name: \"\", lottieUrl: \"\", price: \"\", telegramGiftUrl: \"\", description: \"\", available: true });\n      toast({ title: \"Muvaffaqiyatli\", description: `Gift ${editingGift ? \"yangilandi\" : \"qo'shildi\"}` });\n    },\n    onError: (error: any) => {\n      toast({ title: \"Xatolik\", description: error.message, variant: \"destructive\" });\n    },\n  });\n\n  // Delete gift mutation\n  const deleteGiftMutation = useMutation({\n    mutationFn: async (id: string) => {\n      if (!csrfToken) throw new Error(\"CSRF token topilmadi\");\n      const res = await fetch(`/api/gifts/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"X-CSRF-Token\": csrfToken\n        },\n        credentials: \"include\",\n      });\n      if (!res.ok) throw new Error(await res.text());\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/gifts\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats\"] });\n      toast({ title: \"Muvaffaqiyatli\", description: \"Gift o'chirildi\" });\n    },\n  });\n\n  // Update user balance mutation\n  const updateBalanceMutation = useMutation({\n    mutationFn: async ({ userId, amount }: { userId: string; amount: number }) => {\n      if (!csrfToken) throw new Error(\"CSRF token topilmadi\");\n      const res = await fetch(`/api/admin/users/${userId}/balance`, {\n        method: \"POST\",\n        headers: { \n          \"Content-Type\": \"application/json\",\n          \"X-CSRF-Token\": csrfToken\n        },\n        credentials: \"include\",\n        body: JSON.stringify({ amount }),\n      });\n      if (!res.ok) throw new Error(await res.text());\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({ title: \"Muvaffaqiyatli\", description: \"Balans yangilandi\" });\n    },\n  });\n\n  // Cancel rental mutation\n  const cancelRentalMutation = useMutation({\n    mutationFn: async (rentalId: string) => {\n      if (!csrfToken) throw new Error(\"CSRF token topilmadi\");\n      const res = await fetch(`/api/admin/rentals/${rentalId}/cancel`, {\n        method: \"POST\",\n        headers: {\n          \"X-CSRF-Token\": csrfToken\n        },\n        credentials: \"include\",\n      });\n      if (!res.ok) throw new Error(await res.text());\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/rentals\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/gifts\"] });\n      toast({ title: \"Muvaffaqiyatli\", description: \"Ijara bekor qilindi\" });\n    },\n  });\n\n  const handleGiftSubmit = () => {\n    giftMutation.mutate({\n      ...giftForm,\n      price: parseFloat(giftForm.price),\n    });\n  };\n\n  const handleEditGift = (gift: any) => {\n    setEditingGift(gift);\n    setGiftForm({\n      name: gift.name,\n      lottieUrl: gift.lottieUrl,\n      price: gift.price.toString(),\n      telegramGiftUrl: gift.telegramGiftUrl || \"\",\n      description: gift.description || \"\",\n      available: gift.available,\n    });\n    setGiftDialogOpen(true);\n  };\n\n  const handleAddBalance = async (userId: string) => {\n    const amount = prompt(\"Qo'shiladigan summa (TON):\");\n    if (amount && !isNaN(parseFloat(amount))) {\n      updateBalanceMutation.mutate({ userId, amount: parseFloat(amount) });\n    }\n  };\n\n  const migrateBalancesMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch('/api/admin/migrate-balances', {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRF-Token': csrfToken || '',\n        },\n      });\n      if (!response.ok) throw new Error('Migration failed');\n      return response.json();\n    },\n    onSuccess: (data) => {\n      toast({\n        title: \"Migration muvaffaqiyatli\",\n        description: data.message,\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/users'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Xatolik\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const toggleMaintenanceMutation = useMutation({\n    mutationFn: async (enabled: boolean) => {\n      if (!csrfToken) throw new Error(\"CSRF token topilmadi\");\n      const response = await fetch('/api/admin/maintenance', {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRF-Token': csrfToken,\n        },\n        body: JSON.stringify({ enabled }),\n      });\n      if (!response.ok) throw new Error('Failed to toggle maintenance mode');\n      return response.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/maintenance'] });\n      toast({\n        title: data.enabled ? \"Maintenance mode yoqildi\" : \"Maintenance mode o'chirildi\",\n        description: data.enabled \n          ? \"Foydalanuvchilar tizimga kira olmaydi\" \n          : \"Tizim normal ishlaydi\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Xatolik\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-background pb-32 flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">Yuklanmoqda...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background pb-32 p-4\">\n      <div className=\"max-w-7xl mx-auto space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <h1 className=\"text-2xl font-bold gradient-text\">Admin Panel</h1>\n          <div className=\"flex gap-2\">\n            <Button\n              onClick={() => toggleMaintenanceMutation.mutate(!maintenanceData?.enabled)}\n              disabled={toggleMaintenanceMutation.isPending}\n              variant={maintenanceData?.enabled ? \"destructive\" : \"outline\"}\n              size=\"sm\"\n            >\n              {maintenanceData?.enabled ? \"Maintenance OFF\" : \"Maintenance ON\"}\n            </Button>\n            <Button\n              onClick={() => migrateBalancesMutation.mutate()}\n              disabled={migrateBalancesMutation.isPending}\n              variant=\"outline\"\n              size=\"sm\"\n            >\n              <RefreshCw className={`w-4 h-4 mr-2 ${migrateBalancesMutation.isPending ? 'animate-spin' : ''}`} />\n              Balanslarni Yangilash\n            </Button>\n          </div>\n        </div>\n\n        {stats && (\n          <AdminStats\n            stats={{\n              totalGifts: stats.totalGifts,\n              activeRentals: stats.totalSales || 0,\n              totalUsers: stats.totalUsers,\n              revenue: stats.revenue,\n            }}\n          />\n        )}\n\n        <Tabs defaultValue=\"gifts\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 glass\">\n            <TabsTrigger value=\"gifts\">Giftlar</TabsTrigger>\n            <TabsTrigger value=\"purchases\">Sotuvlar</TabsTrigger>\n            <TabsTrigger value=\"users\">Foydalanuvchilar</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"gifts\" className=\"space-y-4\">\n            <div className=\"flex justify-end\">\n              <Button\n                onClick={() => {\n                  setEditingGift(null);\n                  setGiftForm({ name: \"\", lottieUrl: \"\", price: \"\", telegramGiftUrl: \"\", description: \"\", available: true });\n                  setGiftDialogOpen(true);\n                }}\n                className=\"gradient-blue-purple\"\n              >\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Yangi Gift\n              </Button>\n            </div>\n\n            <Card className=\"glass-strong overflow-hidden\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Nomi</TableHead>\n                    <TableHead>Ta'rif</TableHead>\n                    <TableHead>Narxi</TableHead>\n                    <TableHead>Holati</TableHead>\n                    <TableHead>Amallar</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {gifts.map((gift: any) => (\n                    <TableRow key={gift._id}>\n                      <TableCell className=\"font-medium\">{gift.name}</TableCell>\n                      <TableCell className=\"max-w-xs truncate\">{gift.description || \"‚Äî\"}</TableCell>\n                      <TableCell>{gift.price} TON</TableCell>\n                      <TableCell>\n                        <span\n                          className={`px-2 py-1 rounded-full text-xs ${\n                            gift.status === \"available\" ? \"bg-green-500/20 text-green-400\" : \"bg-amber-500/20 text-amber-400\"\n                          }`}\n                        >\n                          {gift.status === \"available\" ? \"Mavjud\" : \"Sotilgan\"}\n                        </span>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex gap-2\">\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleEditGift(gift)}\n                          >\n                            <Edit className=\"w-4 h-4\" />\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => {\n                              if (confirm(\"Ushbu giftni o'chirmoqchimisiz?\")) {\n                                deleteGiftMutation.mutate(gift._id);\n                              }\n                            }}\n                            className=\"text-red-400\"\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"purchases\" className=\"space-y-4\">\n            <Card className=\"glass-strong overflow-hidden\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Gift</TableHead>\n                    <TableHead>Sana</TableHead>\n                    <TableHead>Summa</TableHead>\n                    <TableHead>Holat</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {allPurchases.map((purchase: any) => (\n                    <TableRow key={purchase._id}>\n                      <TableCell className=\"font-medium\">{purchase.gift?.name || 'Unknown'}</TableCell>\n                      <TableCell>{new Date(purchase.purchaseDate).toLocaleDateString('uz-UZ')}</TableCell>\n                      <TableCell>{purchase.price} TON</TableCell>\n                      <TableCell>\n                        <span\n                          className={`px-2 py-1 rounded-full text-xs ${\n                            purchase.status === 'completed' ? 'bg-green-500/20 text-green-400' : 'bg-gray-500/20 text-gray-400'\n                          }`}\n                        >\n                          {purchase.status === 'completed' ? 'Tugallangan' : 'Kutilmoqda'}\n                        </span>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"users\" className=\"space-y-4\">\n            <Card className=\"glass-strong overflow-hidden\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Foydalanuvchi</TableHead>\n                    <TableHead>Telegram ID</TableHead>\n                    <TableHead>Balans</TableHead>\n                    <TableHead>Xaridlar</TableHead>\n                    <TableHead>Sarflangan</TableHead>\n                    <TableHead>Amallar</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {users.map((u: any) => (\n                    <TableRow key={u._id}>\n                      <TableCell className=\"font-medium\">\n                        {u.firstName || u.username || 'Unknown'}\n                      </TableCell>\n                      <TableCell>{u.telegramId}</TableCell>\n                      <TableCell>{u.balance} TON</TableCell>\n                      <TableCell>{u.purchaseCount || 0}</TableCell>\n                      <TableCell>{u.totalSpent || 0} TON</TableCell>\n                      <TableCell>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleAddBalance(u._id)}\n                        >\n                          <DollarSign className=\"w-4 h-4 mr-1\" />\n                          Balans\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n\n      {/* Gift Dialog */}\n      <Dialog open={giftDialogOpen} onOpenChange={setGiftDialogOpen}>\n        <DialogContent className=\"sm:max-w-md bg-card border-card-border\">\n          <DialogHeader>\n            <DialogTitle>{editingGift ? \"Giftni tahrirlash\" : \"Yangi Gift\"}</DialogTitle>\n            <DialogDescription>\n              Gift ma'lumotlarini kiriting\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"name\">Nomi</Label>\n              <Input\n                id=\"name\"\n                value={giftForm.name}\n                onChange={(e) => setGiftForm({ ...giftForm, name: e.target.value })}\n                placeholder=\"Swiss Mountains\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"description\">Ta'rif</Label>\n              <Input\n                id=\"description\"\n                value={giftForm.description}\n                onChange={(e) => setGiftForm({ ...giftForm, description: e.target.value })}\n                placeholder=\"Gift haqida batafsil ma'lumot\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"lottieUrl\">Lottie URL</Label>\n              <Input\n                id=\"lottieUrl\"\n                value={giftForm.lottieUrl}\n                onChange={(e) => setGiftForm({ ...giftForm, lottieUrl: e.target.value })}\n                placeholder=\"https://...\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"price\">Narxi (TON)</Label>\n              <Input\n                id=\"price\"\n                type=\"number\"\n                step=\"0.1\"\n                value={giftForm.price}\n                onChange={(e) => setGiftForm({ ...giftForm, price: e.target.value })}\n                placeholder=\"2.5\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"telegramGiftUrl\">Telegram Gift URL (ixtiyoriy)</Label>\n              <Input\n                id=\"telegramGiftUrl\"\n                value={giftForm.telegramGiftUrl}\n                onChange={(e) => setGiftForm({ ...giftForm, telegramGiftUrl: e.target.value })}\n                placeholder=\"https://t.me/nft/CookieHeart-52113\"\n              />\n            </div>\n            <Button\n              onClick={handleGiftSubmit}\n              disabled={giftMutation.isPending}\n              className=\"w-full gradient-blue-purple\"\n            >\n              {editingGift ? \"Yangilash\" : \"Qo'shish\"}\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":19621},"UzbekRentBox/client/src/components/GiftCard.tsx":{"content":"import { useRef, useEffect, useState, memo } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Clock, Coins, Eye } from \"lucide-react\";\nimport Lottie from \"lottie-react\";\n\ninterface GiftCardProps {\n  id: string;\n  name: string;\n  description?: string;\n  lottieUrl: string;\n  price: number;\n  status: \"available\" | \"sold\";\n  telegramGiftUrl?: string;\n  onBuy?: (id: string) => void;\n}\n\nconst GiftCard = memo(function GiftCard({ \n  id, \n  name, \n  description,\n  lottieUrl, \n  price, \n  status, \n  telegramGiftUrl,\n  onBuy \n}: GiftCardProps) {\n  const [animationData, setAnimationData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const isAvailable = status === \"available\";\n\n  useEffect(() => {\n    if (lottieUrl.endsWith('.json') || lottieUrl.includes('lottie')) {\n      fetch(lottieUrl)\n        .then(res => res.json())\n        .then(data => {\n          setAnimationData(data);\n          setIsLoading(false);\n        })\n        .catch(() => setIsLoading(false));\n    } else {\n      setIsLoading(false);\n    }\n  }, [lottieUrl]);\n\n  const handleBuyClick = () => {\n    console.log(`Buy gift ${id}`);\n    onBuy?.(id);\n  };\n\n  const handleViewGift = () => {\n    if (telegramGiftUrl) {\n      window.open(telegramGiftUrl, '_blank');\n    }\n  };\n\n  return (\n    <div \n      data-testid={`card-gift-${id}`}\n      className=\"glass rounded-2xl p-3 sm:p-4 hover-elevate transition-all duration-300 overflow-hidden\"\n    >\n      <div className=\"relative mb-2 sm:mb-3\">\n        <Badge \n          data-testid={`badge-status-${id}`}\n          className={`absolute top-1 sm:top-2 left-1 sm:left-2 z-10 text-xs ${\n            isAvailable \n              ? \"bg-emerald-500/90 hover:bg-emerald-500\" \n              : \"bg-amber-500/90 hover:bg-amber-500\"\n          }`}\n        >\n          {isAvailable ? \"Mavjud\" : \"Sotilgan\"}\n        </Badge>\n        \n        <div className=\"aspect-square bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-xl flex items-center justify-center overflow-hidden\">\n          {animationData ? (\n            <Lottie \n              animationData={animationData} \n              loop={true}\n              className=\"w-full h-full\"\n            />\n          ) : isLoading ? (\n            <div className=\"w-16 h-16 gradient-blue-purple rounded-full opacity-50 animate-pulse\"></div>\n          ) : (\n            <div className=\"w-16 h-16 gradient-blue-purple rounded-full opacity-50\"></div>\n          )}\n        </div>\n      </div>\n\n      <h3 data-testid={`text-gift-name-${id}`} className=\"font-semibold text-sm sm:text-base mb-1 truncate\">\n        {name}\n      </h3>\n      \n      {description && (\n        <p className=\"text-xs text-muted-foreground mb-2 line-clamp-2\">{description}</p>\n      )}\n\n      <div className=\"flex items-center justify-between mb-2 sm:mb-3\">\n        <div className=\"flex items-center space-x-1\">\n          <div className=\"flex items-center space-x-1\">\n            <svg className=\"w-4 h-4 sm:w-5 sm:h-5\" viewBox=\"0 0 56 56\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56Z\" fill=\"#0098EA\"/>\n              <path d=\"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5381 22.4861C43.3045 19.4251 41.0761 15.6277 37.5627 15.6277H37.5603ZM26.2548 36.8068L23.6847 31.8327L17.4833 20.7414C17.0742 20.0315 17.5795 19.1218 18.4362 19.1218H26.2524V36.8092L26.2548 36.8068ZM38.5108 20.739L32.3118 31.8351L29.7417 36.8068V19.1194H37.5579C38.4146 19.1194 38.9199 20.0291 38.5108 20.739Z\" fill=\"white\"/>\n            </svg>\n            <span className=\"gradient-text font-bold text-sm sm:text-base\">{price}</span>\n            <span className=\"text-xs text-muted-foreground\">TON</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex gap-2\">\n        <Button \n          data-testid={`button-buy-${id}`}\n          onClick={handleBuyClick}\n          disabled={!isAvailable}\n          className=\"flex-1 gradient-blue-purple hover:opacity-90 text-xs sm:text-sm touch-manipulation\"\n          size=\"sm\"\n        >\n          {isAvailable ? \"Sotib olish\" : \"Sotilgan\"}\n        </Button>\n        {telegramGiftUrl && (\n          <Button\n            data-testid={`button-view-${id}`}\n            onClick={handleViewGift}\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"glass hover:bg-white/10 border-white/20 px-3\"\n          >\n            <Eye className=\"w-4 h-4\" />\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n});\n\nexport default GiftCard;\n","size_bytes":4727},"UzbekRentBox/tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"UzbekRentBox/client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"UzbekRentBox/client/src/lib/telegram.ts":{"content":"declare global {\n  interface Window {\n    Telegram?: {\n      WebApp: {\n        ready: () => void;\n        expand: () => void;\n        close: () => void;\n        initData: string;\n        initDataUnsafe: {\n          user?: {\n            id: number;\n            first_name: string;\n            last_name?: string;\n            username?: string;\n            language_code?: string;\n          };\n          query_id?: string;\n          auth_date?: number;\n          hash?: string;\n        };\n        themeParams: any;\n        colorScheme: \"light\" | \"dark\";\n        MainButton: any;\n        BackButton: any;\n      };\n    };\n  }\n}\n\nexport function getTelegramWebApp() {\n  return window.Telegram?.WebApp;\n}\n\nexport function getTelegramUser() {\n  const tg = getTelegramWebApp();\n  return tg?.initDataUnsafe?.user;\n}\n\nexport function initTelegram() {\n  const tg = getTelegramWebApp();\n  if (tg) {\n    tg.ready();\n    tg.expand();\n  }\n  return tg;\n}\n","size_bytes":939},"UzbekRentBox/client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n  csrfToken?: string | null,\n): Promise<Response> {\n  const headers: Record<string, string> = data ? { \"Content-Type\": \"application/json\" } : {};\n  \n  if (csrfToken) {\n    headers[\"x-csrf-token\"] = csrfToken;\n  }\n  \n  const res = await fetch(url, {\n    method,\n    headers,\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1524},"UzbekRentBox/client/src/pages/ProfilePage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useTonConnectUI, useTonAddress } from \"@tonconnect/ui-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport ProfileCard from \"@/components/ProfileCard\";\nimport RentalHistoryCard from \"@/components/RentalHistoryCard\";\nimport DepositDialog from \"@/components/DepositDialog\";\n\nexport default function ProfilePage() {\n  const { user, connectWallet, csrfToken } = useAuth();\n  const { toast } = useToast();\n  const [tonConnectUI] = useTonConnectUI();\n  const tonAddress = useTonAddress();\n  const [depositDialogOpen, setDepositDialogOpen] = useState(false);\n\n  useEffect(() => {\n    if (!tonConnectUI) return;\n\n    const unsubscribe = tonConnectUI.onStatusChange(async (wallet) => {\n      if (wallet && wallet.account.address) {\n        try {\n          await connectWallet(wallet.account.address);\n          console.log(\"Wallet connected:\", wallet.account.address);\n          toast({\n            title: \"Hamyon ulandi\",\n            description: \"TON hamyon muvaffaqiyatli ulandi\",\n          });\n        } catch (error: any) {\n          console.error(\"Wallet connection failed:\", error);\n          toast({\n            title: \"Xatolik\",\n            description: error.message || \"Hamyonni ulashda xatolik\",\n            variant: \"destructive\",\n          });\n        }\n      } else if (!wallet && user?.walletAddress) {\n        try {\n          await connectWallet(\"\");\n          console.log(\"Wallet disconnected\");\n        } catch (error) {\n          console.error(\"Failed to update wallet disconnection:\", error);\n        }\n      }\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [tonConnectUI, user?.walletAddress]);\n\n  const { data: purchases = [], refetch } = useQuery({\n    queryKey: [\"/api/purchases/me\"],\n    enabled: !!user,\n    queryFn: async () => {\n      if (!user) return [];\n      const response = await fetch(\"/api/purchases/me\", {\n        credentials: \"include\",\n      });\n      if (!response.ok) {\n        console.error(\"Failed to fetch purchases:\", response.status);\n        return [];\n      }\n      const data = await response.json();\n      return Array.isArray(data) ? data : [];\n    },\n  });\n\n  const formatPurchases = (Array.isArray(purchases) ? purchases : []).map((purchase: any) => ({\n    id: purchase._id,\n    giftName: purchase.gift?.name || \"Unknown\",\n    startDate: new Date(purchase.purchaseDate).toLocaleDateString(\"uz-UZ\"),\n    endDate: new Date(purchase.purchaseDate).toLocaleDateString(\"uz-UZ\"),\n    totalCost: purchase.price,\n    status: purchase.status,\n  }));\n\n  const activeRentals = purchases.filter((p: any) => p.status === 'completed').length;\n  const totalRentals = purchases.length;\n  const totalSpent = purchases.reduce((sum: number, p: any) => sum + (p.price || 0), 0);\n\n  const handleConnectWallet = async () => {\n    try {\n      if (tonAddress) {\n        // Disconnect wallet\n        await tonConnectUI.disconnect();\n        await connectWallet(\"\");\n        toast({\n          title: \"Hamyon uzildi\",\n          description: \"TON hamyon muvaffaqiyatli uzildi\",\n        });\n      } else {\n        tonConnectUI.openModal();\n      }\n    } catch (error) {\n      console.error(\"Wallet connection error:\", error);\n      toast({\n        title: \"Xatolik\",\n        description: \"Hamyonni uzishda xatolik yuz berdi\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDeposit = () => {\n    setDepositDialogOpen(true);\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-background pb-32 flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">Yuklanmoqda...</p>\n      </div>\n    );\n  }\n\n  console.log('ProfilePage user data:', {\n    telegramId: user.telegramId,\n    username: user.username,\n    firstName: user.firstName,\n    lastName: user.lastName,\n    balance: user.balance\n  });\n\n  return (\n    <div className=\"min-h-screen bg-background pb-32 p-4 pt-6 sm:pt-8\">\n      <div className=\"max-w-2xl mx-auto space-y-6\">\n        <h1 className=\"text-2xl font-bold gradient-text mb-6\">Profil</h1>\n        \n        <ProfileCard\n          telegramId={user.telegramId}\n          username={user.username}\n          firstName={user.firstName}\n          lastName={user.lastName}\n          balance={user.balance}\n          onConnectWallet={handleConnectWallet}\n          onDeposit={handleDeposit}\n          isWalletConnected={!!tonAddress || !!user.walletAddress}\n          tonAddress={tonAddress}\n          activeRentals={activeRentals}\n          totalRentals={totalRentals}\n          totalSpent={totalSpent}\n          walletBalance={user.balance}\n        />\n\n        <RentalHistoryCard rentals={formatPurchases} />\n      </div>\n\n      <DepositDialog \n        open={depositDialogOpen}\n        onOpenChange={setDepositDialogOpen}\n        onSuccess={() => refetch()}\n      />\n    </div>\n  );\n}\n","size_bytes":4935},"UzbekRentBox/client/src/pages/examples/RentPage.tsx":{"content":"import RentPage from \"../RentPage\";\n\nexport default function RentPageExample() {\n  return <RentPage />;\n}\n","size_bytes":106},"UzbekRentBox/client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"UzbekRentBox/client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"UzbekRentBox/client/src/components/AnimationPlayer.tsx":{"content":"\nimport { useEffect, useRef } from 'react';\nimport lottie, { AnimationItem } from 'lottie-web';\n\ninterface AnimationPlayerProps {\n  animationPath: string;\n  className?: string;\n  loop?: boolean;\n  autoplay?: boolean;\n  onComplete?: () => void;\n}\n\nexport function AnimationPlayer({\n  animationPath,\n  className = \"w-32 h-32\",\n  loop = true,\n  autoplay = true,\n  onComplete\n}: AnimationPlayerProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const animationRef = useRef<AnimationItem | null>(null);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    animationRef.current = lottie.loadAnimation({\n      container: containerRef.current,\n      renderer: 'svg',\n      loop,\n      autoplay,\n      path: animationPath\n    });\n\n    if (onComplete) {\n      animationRef.current.addEventListener('complete', onComplete);\n    }\n\n    return () => {\n      if (animationRef.current) {\n        animationRef.current.destroy();\n      }\n    };\n  }, [animationPath, loop, autoplay, onComplete]);\n\n  return <div ref={containerRef} className={className} />;\n}\n","size_bytes":1066},"UzbekRentBox/server/auth.ts":{"content":"import crypto from \"crypto\";\n\nconst BOT_TOKEN = process.env.TELEGRAM_BOT_TOKEN || \"\";\n\nexport function verifyTelegramWebAppData(initData: string): {\n  valid: boolean;\n  user?: {\n    id: number;\n    first_name: string;\n    last_name?: string;\n    username?: string;\n  };\n} {\n  try {\n    const urlParams = new URLSearchParams(initData);\n    const hash = urlParams.get(\"hash\");\n    urlParams.delete(\"hash\");\n    \n    if (!hash) {\n      return { valid: false };\n    }\n\n    const dataCheckString = Array.from(urlParams.entries())\n      .sort(([a], [b]) => a.localeCompare(b))\n      .map(([key, value]) => `${key}=${value}`)\n      .join(\"\\n\");\n\n    const secretKey = crypto\n      .createHmac(\"sha256\", \"WebAppData\")\n      .update(BOT_TOKEN)\n      .digest();\n\n    const calculatedHash = crypto\n      .createHmac(\"sha256\", secretKey)\n      .update(dataCheckString)\n      .digest(\"hex\");\n\n    if (calculatedHash !== hash) {\n      return { valid: false };\n    }\n\n    const userParam = urlParams.get(\"user\");\n    if (!userParam) {\n      return { valid: false };\n    }\n\n    const user = JSON.parse(userParam);\n    return { valid: true, user };\n  } catch (error) {\n    console.error(\"Telegram auth verification error:\", error);\n    return { valid: false };\n  }\n}\n","size_bytes":1250},"UzbekRentBox/client/src/components/DepositDialog.tsx":{"content":"import { useState } from \"react\";\nimport { useTonConnectUI, useTonAddress } from \"@tonconnect/ui-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Wallet, ArrowDown } from \"lucide-react\";\n\ninterface DepositDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSuccess?: () => void;\n}\n\nconst toNano = (amount: number): bigint => {\n  return BigInt(Math.floor(amount * 1_000_000_000));\n};\n\nexport default function DepositDialog({ open, onOpenChange, onSuccess }: DepositDialogProps) {\n  const [tonConnectUI] = useTonConnectUI();\n  const userAddress = useTonAddress();\n  const { csrfToken } = useAuth();\n  const [amount, setAmount] = useState(\"1\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const DEPOSIT_ADDRESS = \"UQCykymqM_PybUwc569W4AJr9l3OxyFJX5l8coAJqOWLmxgk\";\n\n  const handleDeposit = async () => {\n    if (!amount || parseFloat(amount) <= 0) {\n      toast({\n        title: \"Xatolik\",\n        description: \"To'g'ri summa kiriting\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!userAddress) {\n      toast({\n        title: \"Xatolik\",\n        description: \"Hamyon ulanmagan\",\n        variant: \"destructive\",\n      });\n      tonConnectUI.openModal();\n      return;\n    }\n\n    if (!csrfToken) {\n      toast({\n        title: \"Xatolik\",\n        description: \"Sessiya tugagan, sahifani yangilang\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const transaction = {\n        validUntil: Math.floor(Date.now() / 1000) + 600,\n        messages: [\n          {\n            address: DEPOSIT_ADDRESS,\n            amount: toNano(parseFloat(amount)).toString(),\n          }\n        ]\n      };\n\n      const result = await tonConnectUI.sendTransaction(transaction);\n      console.log(\"Transaction result:\", result);\n\n      // Get wallet info to check network\n      const walletInfo = tonConnectUI.wallet;\n      const network = walletInfo?.account?.chain || \"\";\n\n      // Validate mainnet only\n      if (network !== \"-239\") {\n        toast({\n          title: \"Xatolik\",\n          description: \"Faqat mainnet ishlatiladi! Testnet qabul qilinmaydi.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      try {\n        const depositResponse = await fetch(\"/api/users/deposit\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-CSRF-Token\": csrfToken || \"\",\n          },\n          credentials: \"include\",\n          body: JSON.stringify({\n            amount: parseFloat(amount),\n            transactionBoc: result.boc,\n            network: network,\n          }),\n        });\n\n        if (!depositResponse.ok) {\n          const errorData = await depositResponse.json();\n          throw new Error(errorData.message || \"Deposit qabul qilinmadi\");\n        }\n\n        const depositData = await depositResponse.json();\n        console.log(\"Deposit processed:\", depositData);\n\n        toast({\n          title: \"Muvaffaqiyatli!\",\n          description: `${parseFloat(amount)} TON hisobingizga qo'shildi. Yangi balans: ${depositData.balance} TON`,\n        });\n\n        if (onSuccess) {\n          onSuccess();\n        }\n\n        onOpenChange(false);\n        setAmount(\"1\");\n      } catch (depositError: any) {\n        console.error(\"Deposit tracking error:\", depositError);\n        toast({\n          title: \"Ogohlantirish\",\n          description: \"Tranzaksiya yuborildi, lekin balans yangilanmadi. Admindan so'rang.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error: any) {\n      console.error(\"Deposit error:\", error);\n      toast({\n        title: \"Xatolik\",\n        description: error.message || \"Tranzaksiya bajarilmadi\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const presetAmounts = [1, 5, 10, 25, 50];\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md bg-card border-card-border\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Wallet className=\"w-5 h-5 text-blue-400\" />\n            TON Deposit\n          </DialogTitle>\n          <DialogDescription>\n            Hisobingizga TON yuborish\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {userAddress ? (\n            <>\n              <div className=\"glass rounded-lg p-4 space-y-2\">\n                <Label className=\"text-sm text-muted-foreground\">Sizning manzil</Label>\n                <p className=\"text-xs font-mono break-all\">{userAddress}</p>\n                <ArrowDown className=\"w-4 h-4 mx-auto text-muted-foreground\" />\n                <Label className=\"text-sm text-muted-foreground\">Deposit manzil</Label>\n                <p className=\"text-xs font-mono break-all\">{DEPOSIT_ADDRESS}</p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"amount\">Summa (TON)</Label>\n                <Input\n                  id=\"amount\"\n                  type=\"number\"\n                  step=\"0.1\"\n                  min=\"0\"\n                  value={amount}\n                  onChange={(e) => setAmount(e.target.value)}\n                  placeholder=\"1.0\"\n                  className=\"bg-input\"\n                />\n              </div>\n\n              <div className=\"flex gap-2 flex-wrap\">\n                {presetAmounts.map((preset) => (\n                  <Button\n                    key={preset}\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setAmount(preset.toString())}\n                    className=\"flex-1 min-w-[60px]\"\n                  >\n                    {preset} TON\n                  </Button>\n                ))}\n              </div>\n\n              <Button\n                onClick={handleDeposit}\n                disabled={isLoading}\n                className=\"w-full gradient-blue-purple\"\n              >\n                {isLoading ? \"Yuborilmoqda...\" : `${amount} TON yuborish`}\n              </Button>\n            </>\n          ) : (\n            <div className=\"text-center py-6\">\n              <p className=\"text-muted-foreground mb-4\">\n                Deposit qilish uchun avval hamyonni ulang\n              </p>\n              <Button\n                onClick={() => tonConnectUI.openModal()}\n                className=\"gradient-blue-purple\"\n              >\n                <Wallet className=\"w-4 h-4 mr-2\" />\n                Hamyonni ulash\n              </Button>\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":6991},"UzbekRentBox/client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"UzbekRentBox/client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"UzbekRentBox/server/index.ts":{"content":"import \"dotenv/config\";\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { connectDB } from \"./db\";\nimport { startBot } from \"./bot\";\n\nconst app = express();\n\ndeclare module 'express-session' {\n  interface SessionData {\n    telegramId?: number;\n    username?: string;\n    isAdmin?: boolean;\n    csrfToken?: string;\n  }\n}\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\n\n// Session middleware\nif (!process.env.SESSION_SECRET) {\n  throw new Error(\"SESSION_SECRET environment variable is required for security\");\n}\n\napp.use(\n  session({\n    secret: process.env.SESSION_SECRET,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      secure: process.env.NODE_ENV === \"production\",\n      httpOnly: true,\n      sameSite: process.env.NODE_ENV === \"production\" ? \"none\" : \"lax\",\n      maxAge: 30 * 24 * 60 * 60 * 1000, // 30 days\n    },\n  })\n);\n\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  // Connect to MongoDB\n  await connectDB();\n\n  // Start Telegram Bot\n  startBot().catch(err => {\n    console.error(\"Bot initialization error:\", err);\n  });\n  \n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":3146},"UzbekRentBox/client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"UzbekRentBox/client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"UzbekRentBox/server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertGiftSchema, insertRentalSchema, insertPurchaseSchema } from \"@shared/schema\";\nimport { verifyTelegramWebAppData } from \"./auth\";\nimport { z } from \"zod\";\nimport crypto from \"crypto\";\n\nconst ADMIN_TELEGRAM_ID = parseInt(process.env.ADMIN_TELEGRAM_ID || \"0\");\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n\n  // Middleware to check if user is authenticated\n  function requireAuth(req: any, res: any, next: any) {\n    if (!req.session.telegramId) {\n      return res.status(401).json({ message: \"Tizimga kirish talab qilinadi\" });\n    }\n    next();\n  }\n\n  // Middleware to verify CSRF token\n  function requireCsrf(req: any, res: any, next: any) {\n    const token = req.headers[\"x-csrf-token\"];\n    if (!token || token !== req.session.csrfToken) {\n      return res.status(403).json({ message: \"CSRF token noto'g'ri\" });\n    }\n    next();\n  }\n\n  // Middleware to check admin\n  function isAdmin(req: any, res: any, next: any) {\n    if (!req.session.telegramId || !req.session.isAdmin) {\n      return res.status(403).json({ message: \"Ruxsat yo'q\" });\n    }\n    next();\n  }\n\n  // ============ USER ROUTES ============\n\n  // Authenticate with Telegram WebApp\n  app.post(\"/api/users/auth\", async (req, res) => {\n    try {\n      const { telegramId, username, firstName, lastName } = req.body;\n\n      if (!telegramId) {\n        return res.status(401).json({ message: \"Telegram autentifikatsiya xatosi\" });\n      }\n\n      let user = await storage.getUser(telegramId);\n\n      if (!user) {\n        user = await storage.createUser({\n          telegramId,\n          username: username || `user${telegramId}`,\n          firstName: firstName || '',\n          lastName: lastName || '',\n        });\n      } else {\n        // Update user info if changed\n        if (firstName || lastName) {\n          user.firstName = firstName || user.firstName;\n          user.lastName = lastName || user.lastName;\n          await user.save();\n        }\n      }\n\n      // Generate CSRF token\n      const csrfToken = crypto.randomBytes(32).toString(\"hex\");\n\n      // Set session\n      req.session.telegramId = telegramId;\n      req.session.username = user.username;\n      req.session.isAdmin = telegramId === ADMIN_TELEGRAM_ID;\n      req.session.csrfToken = csrfToken;\n\n      // Migrate old balance format to new format\n      if (typeof user.balance === 'object' && user.balance !== null) {\n        const oldBalance = user.balance as any;\n        const newBalance = oldBalance.ton || 0;\n        user.balance = newBalance;\n        await user.save();\n      }\n\n      res.json({\n        _id: user._id,\n        telegramId: user.telegramId,\n        username: user.username,\n        firstName: user.firstName,\n        lastName: user.lastName,\n        balance: user.balance,\n        walletAddress: user.walletAddress,\n        csrfToken\n      });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get current user profile\n  app.get(\"/api/users/me\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.telegramId!);\n\n      if (!user) {\n        return res.status(404).json({ message: \"Foydalanuvchi topilmadi\" });\n      }\n\n      // Migrate old balance format to new format if necessary\n      if (typeof user.balance === 'object' && user.balance !== null) {\n        const oldBalance = user.balance as any;\n        const newBalance = oldBalance.ton || 0;\n        user.balance = newBalance;\n        await user.save();\n      }\n\n      res.json(user);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Connect wallet\n  app.post(\"/api/users/wallet\", requireAuth, requireCsrf, async (req, res) => {\n    try {\n      const { walletAddress } = req.body;\n\n      const user = await storage.connectWallet(req.session.telegramId!, walletAddress);\n\n      if (!user) {\n        return res.status(404).json({ message: \"Foydalanuvchi topilmadi\" });\n      }\n\n      res.json(user);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Process deposit\n  app.post(\"/api/users/deposit\", requireAuth, requireCsrf, async (req, res) => {\n    try {\n      const { amount, transactionBoc, network } = req.body;\n\n      if (!amount || amount <= 0) {\n        return res.status(400).json({ message: \"Noto'g'ri summa\" });\n      }\n\n      if (!transactionBoc) {\n        return res.status(400).json({ message: \"Tranzaksiya ma'lumotlari topilmadi\" });\n      }\n\n      // Validate network - only accept mainnet (-239)\n      if (network !== \"-239\") {\n        return res.status(400).json({\n          message: \"Faqat mainnet tranzaksiyalari qabul qilinadi. Testnet ishlatmang!\"\n        });\n      }\n\n      const user = await storage.processDeposit(\n        req.session.telegramId!,\n        parseFloat(amount),\n        transactionBoc\n      );\n\n      if (!user) {\n        return res.status(404).json({ message: \"Foydalanuvchi topilmadi\" });\n      }\n\n      res.json({\n        balance: user.balance,\n        message: \"Deposit muvaffaqiyatli qabul qilindi\"\n      });\n    } catch (error: any) {\n      console.error(\"Deposit processing error:\", error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ============ GIFT ROUTES ============\n\n  // Get all gifts (with optional filter)\n  app.get(\"/api/gifts\", async (req, res) => {\n    try {\n      const filter = req.query.filter as \"all\" | \"available\" | \"sold\" | undefined;\n      const gifts = await storage.getGifts(filter);\n      res.json(gifts);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get single gift\n  app.get(\"/api/gifts/:id\", async (req, res) => {\n    try {\n      const gift = await storage.getGift(req.params.id);\n\n      if (!gift) {\n        return res.status(404).json({ message: \"Gift topilmadi\" });\n      }\n\n      res.json(gift);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Create gift (admin only)\n  app.post(\"/api/gifts\", isAdmin, requireCsrf, async (req, res) => {\n    try {\n      const validated = insertGiftSchema.parse(req.body);\n      const gift = await storage.createGift(validated);\n      res.json(gift);\n    } catch (error: any) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: error.errors[0].message });\n      }\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Update gift (admin only)\n  app.put(\"/api/gifts/:id\", isAdmin, requireCsrf, async (req, res) => {\n    try {\n      const validated = insertGiftSchema.partial().parse(req.body);\n      const gift = await storage.updateGift(req.params.id, validated);\n\n      if (!gift) {\n        return res.status(404).json({ message: \"Gift topilmadi\" });\n      }\n\n      res.json(gift);\n    } catch (error: any) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: error.errors[0].message });\n      }\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Delete gift (admin only)\n  app.delete(\"/api/gifts/:id\", isAdmin, requireCsrf, async (req, res) => {\n    try {\n      const success = await storage.deleteGift(req.params.id);\n\n      if (!success) {\n        return res.status(404).json({ message: \"Gift topilmadi\" });\n      }\n\n      res.json({ message: \"Gift o'chirildi\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ============ PURCHASE ROUTES ============\n\n  // Create purchase (buy gift)\n  app.post(\"/api/purchases\", requireAuth, requireCsrf, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.telegramId!);\n      if (!user) {\n        return res.status(404).json({ message: \"Foydalanuvchi topilmadi\" });\n      }\n\n      const { giftId, transactionHash } = req.body;\n      if (!giftId) {\n        return res.status(400).json({ message: \"Gift ID talab qilinadi\" });\n      }\n\n      const gift = await storage.getGift(giftId);\n      if (!gift) {\n        return res.status(404).json({ message: \"Gift topilmadi\" });\n      }\n\n      const purchase = await storage.createPurchase({\n        userId: (user._id as any).toString(),\n        giftId: giftId,\n        price: gift.price,\n        transactionHash,\n      });\n\n      res.json(purchase);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // Get current user purchases\n  app.get(\"/api/purchases/me\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.telegramId!);\n      if (!user) {\n        return res.status(404).json({ message: \"Foydalanuvchi topilmadi\" });\n      }\n\n      const purchases = await storage.getUserPurchasesWithGifts((user._id as any).toString());\n      res.json(purchases);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get all purchases (admin only)\n  app.get(\"/api/purchases\", isAdmin, async (req, res) => {\n    try {\n      const purchases = await storage.getAllPurchases();\n      res.json(purchases);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ============ RENTAL ROUTES (Keep for backward compatibility) ============\n\n  // Create rental\n  app.post(\"/api/rentals\", requireAuth, requireCsrf, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.telegramId!);\n      if (!user) {\n        return res.status(404).json({ message: \"Foydalanuvchi topilmadi\" });\n      }\n\n      const validated = insertRentalSchema.parse(req.body);\n      const { giftId, duration, endDate, totalCost } = validated;\n      const rental = await storage.createRental({\n        userId: (user._id as any).toString(),\n        giftId: giftId,\n        duration: duration,\n        startDate: new Date(),\n        endDate: endDate ? new Date(endDate) : new Date(),\n        totalCost: totalCost || 0,\n        status: \"active\",\n      });\n      res.json(rental);\n    } catch (error: any) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: error.errors[0].message });\n      }\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // Get current user rentals\n  app.get(\"/api/rentals/me\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.telegramId!);\n      if (!user) {\n        return res.status(404).json({ message: \"Foydalanuvchi topilmadi\" });\n      }\n\n      const withDetails = req.query.withDetails === \"true\";\n      const rentals = await storage.getUserRentalsWithGifts((user._id as any).toString(), withDetails);\n      res.json(rentals);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get all rentals (admin only)\n  app.get(\"/api/rentals\", isAdmin, async (req, res) => {\n    try {\n      const rentals = await storage.getAllRentals();\n      res.json(rentals);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Complete rental (admin only)\n  app.post(\"/api/rentals/:id/complete\", isAdmin, requireCsrf, async (req, res) => {\n    try {\n      const rental = await storage.completeRental(req.params.id);\n\n      if (!rental) {\n        return res.status(404).json({ message: \"Ijara topilmadi\" });\n      }\n\n      res.json(rental);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ============ STATS ROUTE ============\n\n  // Get stats (admin only)\n  app.get(\"/api/stats\", isAdmin, async (req, res) => {\n    try {\n      const gifts = await storage.getGifts();\n      const purchases = await storage.getAllPurchases();\n      const rentals = await storage.getAllRentals();\n      const users = await storage.getAllUsers();\n\n      const totalSales = purchases.filter(p => p.status === 'completed').length;\n      const purchaseRevenue = purchases.reduce((sum, p) => sum + (p.price || 0), 0);\n      const rentalRevenue = rentals.reduce((sum, r) => sum + (r.totalCost || 0), 0);\n\n      res.json({\n        totalGifts: gifts.length,\n        totalSales: totalSales,\n        activeRentals: rentals.filter(r => r.status === 'active').length,\n        totalUsers: users.length,\n        revenue: purchaseRevenue + rentalRevenue,\n      });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Get maintenance mode status\n  app.get(\"/api/maintenance\", async (req, res) => {\n    try {\n      const isEnabled = await storage.getMaintenanceMode();\n      res.json({ enabled: isEnabled });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Set maintenance mode (admin only)\n  app.post(\"/api/admin/maintenance\", isAdmin, requireCsrf, async (req, res) => {\n    try {\n      const { enabled } = req.body;\n      const result = await storage.setMaintenanceMode(enabled);\n      res.json({ enabled: result });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Migration endpoint to fix old balance format\n  app.post(\"/api/admin/migrate-balances\", isAdmin, requireCsrf, async (req, res) => {\n    try {\n      const { User } = await import(\"@shared/schema\");\n      const users = await User.find({}); // Get Mongoose documents, not lean objects\n      let migratedCount = 0;\n\n      for (const user of users) {\n        // Check if balance is an object and not null, indicating the old format\n        if (typeof user.balance === 'object' && user.balance !== null) {\n          const oldBalance = user.balance as any; // Cast to any to access properties like 'ton'\n          const newBalance = oldBalance.ton || 0; // Extract 'ton' value or default to 0\n          user.balance = newBalance; // Update balance to the new format (number)\n          await user.save(); // Save the updated user document\n          migratedCount++;\n        }\n      }\n\n      res.json({\n        message: `${migratedCount} foydalanuvchilarning balansi yangilandi`,\n        migratedCount\n      });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ============ ADMIN ROUTES ============\n\n  // Admin: Get all users\n  app.get(\"/api/admin/users\", isAdmin, async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Admin: Update user balance\n  app.post(\"/api/admin/users/:userId/balance\", isAdmin, requireCsrf, async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const { amount } = req.body;\n\n      if (!amount || isNaN(amount)) {\n        return res.status(400).json({ message: \"Noto'g'ri summa\" });\n      }\n\n      const user = await storage.updateUserBalanceAdmin(userId, amount);\n      res.json(user);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Admin: Cancel rental\n  app.post(\"/api/admin/rentals/:rentalId/cancel\", isAdmin, requireCsrf, async (req, res) => {\n    try {\n      const { rentalId } = req.params;\n      const rental = await storage.cancelRental(rentalId);\n      res.json(rental);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}","size_bytes":15560},"UzbekRentBox/client/src/components/examples/RentalHistoryCard.tsx":{"content":"import RentalHistoryCard from \"../RentalHistoryCard\";\n\n//todo: remove mock functionality\nconst mockRentals = [\n  { id: \"1\", giftName: \"Plush Pepe #604\", startDate: \"01.01.2025\", endDate: \"05.01.2025\", totalCost: 25, status: \"active\" as const },\n  { id: \"2\", giftName: \"Golden Star #123\", startDate: \"15.12.2024\", endDate: \"20.12.2024\", totalCost: 40, status: \"completed\" as const },\n];\n\nexport default function RentalHistoryCardExample() {\n  return (\n    <div className=\"bg-background p-4\">\n      <RentalHistoryCard rentals={mockRentals} />\n    </div>\n  );\n}\n","size_bytes":559},"UzbekRentBox/client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"UzbekRentBox/client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"UzbekRentBox/client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"UzbekRentBox/design_guidelines.md":{"content":"# AVOV RENT - Telegram Mini App Design Guidelines\n\n## Design Approach\n**Reference-Based Approach**: Modern fintech/crypto apps with glassmorphism aesthetics (Phantom Wallet, Rainbow Wallet) combined with Telegram's native design language.\n\n## Core Visual Identity\n\n### Color Palette\n- **Primary Background**: #2d2d2d (dark charcoal)\n- **Accent Gradients**: Blue-to-purple gradients (e.g., #3b82f6 ‚Üí #8b5cf6)\n- **Glassmorphism Layers**: rgba(255, 255, 255, 0.1) with backdrop-blur-xl\n- **Text**: White primary, rgba(255, 255, 255, 0.7) secondary\n- **Success/Available**: Emerald green tones\n- **Rented/Unavailable**: Amber/orange tones\n\n### Typography\n- **Font Family**: Inter or SF Pro\n- **Headings**: font-semibold to font-bold, sizes 24px-32px\n- **Body**: font-normal, 14px-16px\n- **Labels**: font-medium, 12px-14px\n- **All text in Uzbek language**\n\n### Spacing System\nTailwind units: **2, 3, 4, 6, 8, 12, 16** (e.g., p-4, gap-6, mb-8)\n\n## Loading Screen\n- **Full viewport** centered content\n- **Typewriter animation** for \"AVOV RENT\" text (appears character by character)\n- **Delivery box animation**: Subtle floating/bouncing box icon above text\n- **Beautiful custom font** for brand name (display serif or modern sans)\n- **Gradient background** with subtle animated gradient shift\n- **Duration**: 2-3 seconds before fade-out to main app\n\n## Navigation Structure\n\n### Glassmorphism Pill Bottom Navigation\n- **Fixed bottom position** with safe-area padding\n- **Pill/capsule shape**: Fully rounded (rounded-full), floating above bottom edge\n- **Glass effect**: backdrop-blur-lg, border border-white/20, bg-white/10\n- **Three tabs**: Rent, Profile, Admin (only visible to admin ID: 7263354123)\n- **Active state**: Gradient background fill, icon shifts scale\n- **Tab icons**: Simple line icons, no emojis\n- **Floating**: mb-6 from bottom, mx-4 from sides, shadow-2xl\n\n## Page Layouts\n\n### RENT Page (Main)\n**Grid Layout**: 2-column on mobile (grid-cols-2), 3-column on tablet+ (md:grid-cols-3)\n\n**Gift Cards**:\n- **Glassmorphism container**: backdrop-blur-md, bg-white/5, border border-white/10, rounded-2xl\n- **Lottie animation area**: aspect-square, displays gift animation from Fragment API\n- **Content padding**: p-4\n- **Gift name**: font-semibold, text-base\n- **Price display**: TON logo + amount, gradient text (bg-gradient-to-r from-blue-400 to-purple-400)\n- **Rental period**: Small text, secondary color\n- **Status badge**: Floating top-right corner (available: green, rented: amber)\n- **CTA button**: Full-width, glassmorphism with gradient border, \"Ijaraga olish\" text\n\n**Filter Bar**:\n- **Horizontal pill tabs** below header\n- **Options**: Hammasi / Mavjud / Band qilingan\n- **Active tab**: Gradient background, smooth transition\n\n### PROFILE Page\n**Vertical layout** with glassmorphism cards, gap-4:\n\n1. **User Info Card**: Avatar placeholder, username, Telegram ID\n2. **Balance Card**: Large TON amount display, gradient accent, connect wallet button\n3. **Active Rentals Section**: Horizontal scrolling cards with gift previews\n4. **Rental History**: Vertical list with gift thumbnails, dates, amounts\n5. **Inventory Section**: User's owned gifts ready for rental listing\n6. **Statistics Grid**: 2x2 grid showing total rentals, earnings, active items\n\n### ADMIN PANEL\n**Dashboard Layout**:\n- **Top stats grid**: 4 glassmorphism cards (total gifts, active rentals, total users, revenue)\n- **Management sections**: Tabs for Gifts / Rentals / Users\n- **Gift Management**: Add button (gradient, fixed bottom-right), table view with edit/delete actions\n- **Gift form**: Modal overlay with glassmorphism, Lottie URL input, price input (TON), name field\n- **Rentals list**: Timeline view with user info, gift, dates, auto-renewal indicator\n- **User list**: Table with Telegram data, rental count, total spent\n\n## Component Specifications\n\n### Glassmorphism Cards\n```\nStandard card:\n- backdrop-blur-lg\n- bg-white/10\n- border border-white/20\n- rounded-2xl\n- shadow-xl\n- p-6\n```\n\n### Buttons\n- **Primary**: Gradient background (blue-to-purple), white text, rounded-xl, py-3 px-6\n- **Secondary**: Glassmorphism with gradient border, rounded-xl\n- **On-image buttons**: backdrop-blur-md background, no hover effects (natural glassmorphism)\n\n### Form Inputs\n- **Glass style**: backdrop-blur-sm, bg-white/5, border border-white/20, rounded-lg\n- **Focus state**: border-white/40, subtle glow\n- **Labels**: Above input, font-medium, text-sm\n\n### Animations\n- **Smooth transitions**: transition-all duration-300\n- **Card hover**: scale-105 transform\n- **Loading states**: Subtle pulse animation\n- **Page transitions**: Fade + slide effects\n- **Gift Lottie**: Autoplay on card hover/tap\n\n## TON Integration UI\n- **Connect Wallet button**: Prominent in profile, TON logo + \"Hamyonni ulash\" text\n- **Payment modal**: Glassmorphism overlay, amount preview, confirmation flow\n- **Transaction feedback**: Success/error states with animations\n- **Balance display**: Always visible in profile header with refresh icon\n\n## Responsive Behavior\n- **Mobile-first**: Single column layouts stack vertically\n- **Tablet (md:)**: 2-column grids, expanded navigation\n- **Desktop (lg:)**: 3-column grids, sidebar potential for admin\n\n## Images\n**No hero images** - This is a Telegram mini app focused on functional UI. Gift previews use Lottie animations from Fragment API, not static images.","size_bytes":5371},"UzbekRentBox/client/src/components/SuccessModal.tsx":{"content":"\nimport { AnimationPlayer } from './AnimationPlayer';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\n\ninterface SuccessModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  description: string;\n}\n\nexport function SuccessModal({ isOpen, onClose, title, description }: SuccessModalProps) {\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md glass border-green-500/20\">\n        <DialogHeader>\n          <div className=\"flex justify-center mb-4\">\n            <AnimationPlayer\n              animationPath=\"/done.json\"\n              className=\"w-24 h-24\"\n              loop={false}\n            />\n          </div>\n          <DialogTitle className=\"text-center text-green-400\">{title}</DialogTitle>\n          <DialogDescription className=\"text-center\">\n            {description}\n          </DialogDescription>\n        </DialogHeader>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":1019},"UzbekRentBox/client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"UzbekRentBox/client/src/components/MaintenanceMode.tsx":{"content":"\nimport { AnimationPlayer } from './AnimationPlayer';\n\nexport function MaintenanceMode() {\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n      <div className=\"glass rounded-2xl p-8 max-w-md w-full text-center\">\n        <AnimationPlayer\n          animationPath=\"/maintance.json\"\n          className=\"w-48 h-48 mx-auto\"\n        />\n        <h1 className=\"text-2xl font-bold mt-6 mb-3 gradient-text\">\n          Texnik ishlar olib borilmoqda\n        </h1>\n        <p className=\"text-muted-foreground mb-4\">\n          Tizimimizni yaxshilash uchun qisqa vaqt ichida texnik ishlar olib bormoqdamiz.\n        </p>\n        <p className=\"text-sm text-muted-foreground\">\n          Tez orada qaytamiz! üöÄ\n        </p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":788},"UzbekRentBox/client/src/App.tsx":{"content":"import { useState } from \"react\";\nimport { QueryClientProvider, useQuery } from \"@tanstack/react-query\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider, useAuth } from \"@/hooks/useAuth\";\nimport LoadingScreen from \"@/components/LoadingScreen\";\nimport BottomNavigation from \"@/components/BottomNavigation\";\nimport RentPage from \"@/pages/RentPage\";\nimport ProfilePage from \"@/pages/ProfilePage\";\nimport AdminPage from \"@/pages/AdminPage\";\nimport { MaintenanceMode } from \"./components/MaintenanceMode\";\n\nfunction AppContent() {\n  const { user, loading: authLoading } = useAuth();\n  const [isLoading, setIsLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<\"rent\" | \"profile\" | \"admin\">(\"rent\");\n  const { isAdmin } = useAuth();\n\n  // Check maintenance mode\n  const { data: maintenanceData } = useQuery({\n    queryKey: [\"/api/maintenance\"],\n    queryFn: async () => {\n      const res = await fetch(\"/api/maintenance\", { credentials: \"include\" });\n      return res.json();\n    },\n    refetchInterval: 30000, // Har 30 sekundda tekshirish\n  });\n\n  const renderPage = () => {\n    switch (activeTab) {\n      case \"rent\":\n        return <RentPage />;\n      case \"profile\":\n        return <ProfilePage />;\n      case \"admin\":\n        return isAdmin ? <AdminPage /> : <RentPage />;\n      default:\n        return <RentPage />;\n    }\n  };\n\n  if (isLoading) {\n    return <LoadingScreen onComplete={() => setIsLoading(false)} />;\n  }\n\n  // Show maintenance mode if enabled and user is not admin\n  if (maintenanceData?.enabled && user?.role !== \"admin\") {\n    return <MaintenanceMode />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background text-foreground pb-20\" style={{ minHeight: '-webkit-fill-available' }}>\n      <div className=\"max-w-screen-xl mx-auto\">\n        {renderPage()}\n      </div>\n      <BottomNavigation\n        activeTab={activeTab}\n        onTabChange={setActiveTab}\n        isAdmin={isAdmin}\n      />\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AuthProvider>\n          <AppContent />\n        </AuthProvider>\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;","size_bytes":2359},"UzbekRentBox/postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"UzbekRentBox/client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"UzbekRentBox/QUICK_DEPLOY_GUIDE.md":{"content":"# ‚ö° Tez Deploy Qilish (5 daqiqada)\n\n## 1Ô∏è‚É£ GitHub'ga Yuklash\n\n```bash\ncd UzbekRentBox\ngit init\ngit add .\ngit commit -m \"Ready for Vercel deployment\"\ngit branch -M main\ngit remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO.git\ngit push -u origin main\n```\n\n## 2Ô∏è‚É£ Vercel'da Deploy\n\n1. [vercel.com](https://vercel.com) ‚Üí Login (GitHub bilan)\n2. **\"Add New\" ‚Üí \"Project\"**\n3. Repository'ni tanlang ‚Üí **\"Import\"**\n4. ‚ö†Ô∏è **Root Directory: `UzbekRentBox`** (MAJBURIY!)\n5. **Environment Variables** qo'shing:\n\n```env\nMONGODB_URI=your_mongodb_uri\nTELEGRAM_BOT_TOKEN=your_bot_token\nTELEGRAM_BOT_USERNAME=your_bot_username\nADMIN_TELEGRAM_ID=your_telegram_id\nMASTER_WALLET_ADDRESS=your_wallet_address\nSESSION_SECRET=generate_with_crypto\nUSE_WEBHOOK=true\nNODE_ENV=production\n```\n\nSESSION_SECRET yaratish:\n```bash\nnode -e \"console.log(require('crypto').randomBytes(32).toString('hex'))\"\n```\n\n6. **Deploy** ‚Üí Kutish (3-5 min)\n\n## 3Ô∏è‚É£ Deployment Protection O'chirish\n\n1. Project Settings ‚Üí **Deployment Protection**\n2. **Vercel Authentication** ‚Üí OFF\n3. Save\n\n## 4Ô∏è‚É£ URL'ni Yangilash\n\n1. Settings ‚Üí **Environment Variables**\n2. Qo'shing:\n```env\nWEBAPP_URL=https://your-app.vercel.app\nWEBHOOK_DOMAIN=https://your-app.vercel.app\n```\n3. **Redeploy**\n\n## 5Ô∏è‚É£ Telegram Webhook O'rnatish\n\nBrauzerda oching (tokenni almashtiring):\n```\nhttps://api.telegram.org/botYOUR_TOKEN/setWebhook?url=https://your-app.vercel.app/api/webhook\n```\n\nJavob: `{\"ok\":true,\"result\":true}`\n\n## ‚úÖ Test\n\n1. Telegram'da `/start` yuboring\n2. Bot javob berishi kerak\n3. \"üöÄ Ilovani ochish\" ‚Üí Mini App ochiladi\n\n---\n\n**Muammo bo'lsa:** [VERCEL_DEPLOYMENT.md](./VERCEL_DEPLOYMENT.md) ko'ring\n","size_bytes":1697},"UzbekRentBox/api/users/auth.ts":{"content":"\nimport type { VercelRequest, VercelResponse } from '@vercel/node';\nimport { connectDB } from \"../../server/db\";\nimport { storage } from \"../../server/storage\";\n\nexport default async function handler(req: VercelRequest, res: VercelResponse) {\n  if (req.method !== 'POST') {\n    return res.status(405).json({ message: \"Method not allowed\" });\n  }\n\n  try {\n    await connectDB();\n\n    const { telegramId, username, firstName, lastName } = req.body;\n\n    if (!telegramId) {\n      return res.status(401).json({ message: \"Telegram autentifikatsiya xatosi\" });\n    }\n\n    let user = await storage.getUser(telegramId);\n\n    if (!user) {\n      user = await storage.createUser({\n        telegramId,\n        username: username || `user${telegramId}`,\n        firstName: firstName || '',\n        lastName: lastName || '',\n      });\n    }\n\n    return res.json({\n      _id: user._id,\n      telegramId: user.telegramId,\n      username: user.username,\n      firstName: user.firstName,\n      lastName: user.lastName,\n      balance: user.balance,\n      walletAddress: user.walletAddress,\n    });\n  } catch (error: any) {\n    console.error(\"Auth error:\", error);\n    return res.status(500).json({ message: error.message });\n  }\n}\n","size_bytes":1212},"UzbekRentBox/client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"UzbekRentBox/api/routes.ts":{"content":"\n// This file is deprecated - routes are now handled by individual files\n","size_bytes":73},"UzbekRentBox/client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"UzbekRentBox/client/src/pages/examples/ProfilePage.tsx":{"content":"import ProfilePage from \"../ProfilePage\";\n\nexport default function ProfilePageExample() {\n  return <ProfilePage />;\n}\n","size_bytes":118},"UzbekRentBox/server/db.ts":{"content":"import mongoose from \"mongoose\";\n\nconst MONGODB_URI = process.env.MONGODB_URI || \"\";\n\nif (!MONGODB_URI) {\n  throw new Error(\"MONGODB_URI environment variable is not defined\");\n}\n\nexport async function connectDB() {\n  try {\n    await mongoose.connect(MONGODB_URI);\n    console.log(\"‚úÖ MongoDB connected successfully\");\n    \n    // Auto-release expired rentals on startup\n    await autoReleaseExpiredRentals();\n    \n    // Set up periodic check every hour\n    setInterval(autoReleaseExpiredRentals, 60 * 60 * 1000);\n  } catch (error) {\n    console.error(\"‚ùå MongoDB connection error:\", error);\n    process.exit(1);\n  }\n}\n\nasync function autoReleaseExpiredRentals() {\n  try {\n    const { Rental, Gift } = await import(\"@shared/schema\");\n    const now = new Date();\n    \n    const expiredRentals = await Rental.find({\n      status: \"active\",\n      endDate: { $lte: now }\n    });\n\n    for (const rental of expiredRentals) {\n      await Rental.findByIdAndUpdate(rental._id, { status: \"completed\" });\n      await Gift.findByIdAndUpdate(rental.giftId, {\n        status: \"available\",\n        $unset: { rentedBy: \"\", rentedUntil: \"\" }\n      });\n    }\n\n    if (expiredRentals.length > 0) {\n      console.log(`‚úÖ Auto-released ${expiredRentals.length} expired rentals`);\n    }\n  } catch (error) {\n    console.error(\"‚ùå Error auto-releasing rentals:\", error);\n  }\n}\n\nmongoose.connection.on(\"disconnected\", () => {\n  console.log(\"MongoDB disconnected\");\n});\n\nmongoose.connection.on(\"error\", (err) => {\n  console.error(\"MongoDB error:\", err);\n});\n","size_bytes":1536}},"version":2}